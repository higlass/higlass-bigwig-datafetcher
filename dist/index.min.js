var pf=Object.create;var sr=Object.defineProperty;var df=Object.getOwnPropertyDescriptor;var mf=Object.getOwnPropertyNames;var wf=Object.getPrototypeOf,gf=Object.prototype.hasOwnProperty;var P=(r,t)=>()=>(r&&(t=r(r=0)),t);var ne=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),_f=(r,t)=>{for(var e in t)sr(r,e,{get:t[e],enumerable:!0})},Pi=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of mf(t))!gf.call(r,i)&&i!==e&&sr(r,i,{get:()=>t[i],enumerable:!(n=df(t,i))||n.enumerable});return r};var xe=(r,t,e)=>(e=r!=null?pf(wf(r)):{},Pi(t||!r||!r.__esModule?sr(e,"default",{value:r,enumerable:!0}):e,r)),bf=r=>Pi(sr({},"__esModule",{value:!0}),r);function zi(){throw new Error("setTimeout has not been defined")}function Li(){throw new Error("clearTimeout has not been defined")}function Mi(r){if(Re===setTimeout)return setTimeout(r,0);if((Re===zi||!Re)&&setTimeout)return Re=setTimeout,setTimeout(r,0);try{return Re(r,0)}catch(t){try{return Re.call(null,r,0)}catch(e){return Re.call(this,r,0)}}}function xf(r){if(Se===clearTimeout)return clearTimeout(r);if((Se===Li||!Se)&&clearTimeout)return Se=clearTimeout,clearTimeout(r);try{return Se(r)}catch(t){try{return Se.call(null,r)}catch(e){return Se.call(this,r)}}}function yf(){!ot||!ze||(ot=!1,ze.length?ye=ze.concat(ye):fr=-1,ye.length&&Vi())}function Vi(){if(!ot){var r=Mi(yf);ot=!0;for(var t=ye.length;t;){for(ze=ye,ye=[];++fr<t;)ze&&ze[fr].run();fr=-1,t=ye.length}ze=null,ot=!1,xf(r)}}function vf(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];ye.push(new Zi(r,t)),ye.length===1&&!ot&&Mi(Vi)}function Zi(r,t){this.fun=r,this.array=t}function Le(){}function zf(r){throw new Error("process.binding is not supported")}function Lf(){return"/"}function Mf(r){throw new Error("process.chdir is not supported")}function Vf(){return 0}function Yf(r){var t=Zf.call(it)*.001,e=Math.floor(t),n=Math.floor(t%1*1e9);return r&&(e=e-r[0],n=n-r[1],n<0&&(e--,n+=1e9)),[e,n]}function jf(){var r=new Date,t=r-Hf;return t/1e3}var Re,Se,ye,ot,ze,fr,Ef,Tf,Af,Cf,Rf,Sf,kf,If,$f,Ff,Nf,Uf,Bf,Of,Pf,Df,it,Zf,Hf,y,Di,d=P(()=>{Re=zi,Se=Li;typeof globalThis.setTimeout=="function"&&(Re=setTimeout);typeof globalThis.clearTimeout=="function"&&(Se=clearTimeout);ye=[],ot=!1,fr=-1;Zi.prototype.run=function(){this.fun.apply(null,this.array)};Ef="browser",Tf="browser",Af=!0,Cf={},Rf=[],Sf="",kf={},If={},$f={};Ff=Le,Nf=Le,Uf=Le,Bf=Le,Of=Le,Pf=Le,Df=Le;it=globalThis.performance||{},Zf=it.now||it.mozNow||it.msNow||it.oNow||it.webkitNow||function(){return new Date().getTime()};Hf=new Date;y={nextTick:vf,title:Ef,browser:Af,env:Cf,argv:Rf,version:Sf,versions:kf,on:Ff,addListener:Nf,once:Uf,off:Bf,removeListener:Of,removeAllListeners:Pf,emit:Df,binding:zf,cwd:Lf,chdir:Mf,umask:Vf,hrtime:Yf,platform:Tf,release:If,config:$f,uptime:jf},Di={};Object.keys(Di).forEach(r=>{let t=r.split("."),e=y;for(let n=0;n<t.length;n++){let i=t[n];n===t.length-1?e[i]=Di[r]:e=e[i]||(e[i]={})}})});function Wi(){nn=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=r.length;t<e;++t)ce[t]=r[t],ie[r.charCodeAt(t)]=t;ie["-".charCodeAt(0)]=62,ie["_".charCodeAt(0)]=63}function qf(r){nn||Wi();var t,e,n,i,o,a,s=r.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[s-2]==="="?2:r[s-1]==="="?1:0,a=new Wf(s*3/4-o),n=o>0?s-4:s;var l=0;for(t=0,e=0;t<n;t+=4,e+=3)i=ie[r.charCodeAt(t)]<<18|ie[r.charCodeAt(t+1)]<<12|ie[r.charCodeAt(t+2)]<<6|ie[r.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=i&255;return o===2?(i=ie[r.charCodeAt(t)]<<2|ie[r.charCodeAt(t+1)]>>4,a[l++]=i&255):o===1&&(i=ie[r.charCodeAt(t)]<<10|ie[r.charCodeAt(t+1)]<<4|ie[r.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=i&255),a}function Gf(r){return ce[r>>18&63]+ce[r>>12&63]+ce[r>>6&63]+ce[r&63]}function Kf(r,t,e){for(var n,i=[],o=t;o<e;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(Gf(n));return i.join("")}function Yi(r){nn||Wi();for(var t,e=r.length,n=e%3,i="",o=[],a=16383,s=0,l=e-n;s<l;s+=a)o.push(Kf(r,s,s+a>l?l:s+a));return n===1?(t=r[e-1],i+=ce[t>>2],i+=ce[t<<4&63],i+="=="):n===2&&(t=(r[e-2]<<8)+r[e-1],i+=ce[t>>10],i+=ce[t>>4&63],i+=ce[t<<2&63],i+="="),o.push(i),o.join("")}function ur(){return w.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ve(r,t){if(ur()<t)throw new RangeError("Invalid typed array length");return w.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=w.prototype):(r===null&&(r=new w(t)),r.length=t),r}function w(r,t,e){if(!w.TYPED_ARRAY_SUPPORT&&!(this instanceof w))return new w(r,t,e);if(typeof r=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return on(this,r)}return qi(this,r,t,e)}function qi(r,t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer?Qf(r,t,e,n):typeof t=="string"?Jf(r,t,e):eu(r,t)}function Gi(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function Xf(r,t,e,n){return Gi(t),t<=0?ve(r,t):e!==void 0?typeof n=="string"?ve(r,t).fill(e,n):ve(r,t).fill(e):ve(r,t)}function on(r,t){if(Gi(t),r=ve(r,t<0?0:an(t)|0),!w.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)r[e]=0;return r}function Jf(r,t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!w.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=Ki(t,e)|0;r=ve(r,n);var i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function rn(r,t){var e=t.length<0?0:an(t.length)|0;r=ve(r,e);for(var n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Qf(r,t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return e===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,e):t=new Uint8Array(t,e,n),w.TYPED_ARRAY_SUPPORT?(r=t,r.__proto__=w.prototype):r=rn(r,t),r}function eu(r,t){if(pe(t)){var e=an(t.length)|0;return r=ve(r,e),r.length===0||t.copy(r,0,0,e),r}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||bu(t.length)?ve(r,0):rn(r,t);if(t.type==="Buffer"&&Array.isArray(t.data))return rn(r,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function an(r){if(r>=ur())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ur().toString(16)+" bytes");return r|0}function pe(r){return!!(r!=null&&r._isBuffer)}function Ki(r,t){if(pe(r))return r.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var e=r.length;if(e===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return lr(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return no(r).length;default:if(n)return lr(r).length;t=(""+t).toLowerCase(),n=!0}}function tu(r,t,e){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return hu(this,t,e);case"utf8":case"utf-8":return Qi(this,t,e);case"ascii":return uu(this,t,e);case"latin1":case"binary":return lu(this,t,e);case"base64":return su(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return cu(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}function Me(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}function Xi(r,t,e,n,i){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(i)return-1;e=r.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof t=="string"&&(t=w.from(t,n)),pe(t))return t.length===0?-1:Hi(r,t,e,n,i);if(typeof t=="number")return t=t&255,w.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):Hi(r,[t],e,n,i);throw new TypeError("val must be string, number or Buffer")}function Hi(r,t,e,n,i){var o=1,a=r.length,s=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;o=2,a/=2,s/=2,e/=2}function l(h,g){return o===1?h[g]:h.readUInt16BE(g*o)}var u;if(i){var f=-1;for(u=e;u<a;u++)if(l(r,u)===l(t,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===s)return f*o}else f!==-1&&(u-=u-f),f=-1}else for(e+s>a&&(e=a-s),u=e;u>=0;u--){for(var c=!0,p=0;p<s;p++)if(l(r,u+p)!==l(t,p)){c=!1;break}if(c)return u}return-1}function ru(r,t,e,n){e=Number(e)||0;var i=r.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(a*2,2),16);if(isNaN(s))return a;r[e+a]=s}return a}function nu(r,t,e,n){return pr(lr(t,r.length-e),r,e,n)}function Ji(r,t,e,n){return pr(gu(t),r,e,n)}function iu(r,t,e,n){return Ji(r,t,e,n)}function ou(r,t,e,n){return pr(no(t),r,e,n)}function au(r,t,e,n){return pr(_u(t,r.length-e),r,e,n)}function su(r,t,e){return t===0&&e===r.length?Yi(r):Yi(r.slice(t,e))}function Qi(r,t,e){e=Math.min(r.length,e);for(var n=[],i=t;i<e;){var o=r[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=e){var l,u,f,c;switch(s){case 1:o<128&&(a=o);break;case 2:l=r[i+1],(l&192)===128&&(c=(o&31)<<6|l&63,c>127&&(a=c));break;case 3:l=r[i+1],u=r[i+2],(l&192)===128&&(u&192)===128&&(c=(o&15)<<12|(l&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:l=r[i+1],u=r[i+2],f=r[i+3],(l&192)===128&&(u&192)===128&&(f&192)===128&&(c=(o&15)<<18|(l&63)<<12|(u&63)<<6|f&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=s}return fu(n)}function fu(r){var t=r.length;if(t<=ji)return String.fromCharCode.apply(String,r);for(var e="",n=0;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=ji));return e}function uu(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]&127);return n}function lu(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]);return n}function hu(r,t,e){var n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=t;o<e;++o)i+=wu(r[o]);return i}function cu(r,t,e){for(var n=r.slice(t,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}function D(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}function q(r,t,e,n,i,o){if(!pe(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}function hr(r,t,e,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(r.length-e,2);i<o;++i)r[e+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}function cr(r,t,e,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(r.length-e,4);i<o;++i)r[e+i]=t>>>(n?i:3-i)*8&255}function eo(r,t,e,n,i,o){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function to(r,t,e,n,i){return i||eo(r,t,e,4,34028234663852886e22,-34028234663852886e22),oo(r,t,e,n,23,4),e+4}function ro(r,t,e,n,i){return i||eo(r,t,e,8,17976931348623157e292,-17976931348623157e292),oo(r,t,e,n,52,8),e+8}function du(r){if(r=mu(r).replace(pu,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function mu(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function wu(r){return r<16?"0"+r.toString(16):r.toString(16)}function lr(r,t){t=t||1/0;for(var e,n=r.length,i=null,o=[],a=0;a<n;++a){if(e=r.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function gu(r){for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function _u(r,t){for(var e,n,i,o=[],a=0;a<r.length&&!((t-=2)<0);++a)e=r.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function no(r){return qf(du(r))}function pr(r,t,e,n){for(var i=0;i<n&&!(i+e>=t.length||i>=r.length);++i)t[i+e]=r[i];return i}function bu(r){return r!==r}function xu(r){return r!=null&&(!!r._isBuffer||io(r)||yu(r))}function io(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function yu(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&io(r.slice(0,0))}function dr(r,t,e,n,i){var o,a,s=i*8-n-1,l=(1<<s)-1,u=l>>1,f=-7,c=e?i-1:0,p=e?-1:1,h=r[t+c];for(c+=p,o=h&(1<<-f)-1,h>>=-f,f+=s;f>0;o=o*256+r[t+c],c+=p,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=a*256+r[t+c],c+=p,f-=8);if(o===0)o=1-u;else{if(o===l)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(h?-1:1)*a*Math.pow(2,o-n)}function oo(r,t,e,n,i,o){var a,s,l,u=o*8-i-1,f=(1<<u)-1,c=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,g=n?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?t+=p/l:t+=p*Math.pow(2,1-c),t*l>=2&&(a++,l/=2),a+c>=f?(s=0,a=f):a+c>=1?(s=(t*l-1)*Math.pow(2,i),a=a+c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;r[e+h]=s&255,h+=g,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;r[e+h]=a&255,h+=g,a/=256,u-=8);r[e+h-g]|=_*128}var ce,ie,Wf,nn,ji,pu,ao=P(()=>{d();m();ce=[],ie=[],Wf=typeof Uint8Array!="undefined"?Uint8Array:Array,nn=!1;w.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;w.poolSize=8192;w._augment=function(r){return r.__proto__=w.prototype,r};w.from=function(r,t,e){return qi(null,r,t,e)};w.kMaxLength=ur();w.TYPED_ARRAY_SUPPORT&&(w.prototype.__proto__=Uint8Array.prototype,w.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&w[Symbol.species]);w.alloc=function(r,t,e){return Xf(null,r,t,e)};w.allocUnsafe=function(r){return on(null,r)};w.allocUnsafeSlow=function(r){return on(null,r)};w.isBuffer=xu;w.compare=function(t,e){if(!pe(t)||!pe(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0};w.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};w.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return w.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=w.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!pe(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};w.byteLength=Ki;w.prototype._isBuffer=!0;w.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Me(this,e,e+1);return this};w.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Me(this,e,e+3),Me(this,e+1,e+2);return this};w.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Me(this,e,e+7),Me(this,e+1,e+6),Me(this,e+2,e+5),Me(this,e+3,e+4);return this};w.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Qi(this,0,t):tu.apply(this,arguments)};w.prototype.equals=function(t){if(!pe(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:w.compare(this,t)===0};w.prototype.compare=function(t,e,n,i,o){if(!pe(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=n-e,l=Math.min(a,s),u=this.slice(i,o),f=t.slice(e,n),c=0;c<l;++c)if(u[c]!==f[c]){a=u[c],s=f[c];break}return a<s?-1:s<a?1:0};w.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};w.prototype.indexOf=function(t,e,n){return Xi(this,t,e,n,!0)};w.prototype.lastIndexOf=function(t,e,n){return Xi(this,t,e,n,!1)};w.prototype.write=function(t,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return ru(this,t,e,n);case"utf8":case"utf-8":return nu(this,t,e,n);case"ascii":return Ji(this,t,e,n);case"latin1":case"binary":return iu(this,t,e,n);case"base64":return ou(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return au(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};ji=4096;w.prototype.slice=function(t,e){var n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(w.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=w.prototype;else{var o=e-t;i=new w(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};w.prototype.readUIntLE=function(t,e,n){t=t|0,e=e|0,n||D(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return i};w.prototype.readUIntBE=function(t,e,n){t=t|0,e=e|0,n||D(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i};w.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]};w.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8};w.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]};w.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};w.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};w.prototype.readIntLE=function(t,e,n){t=t|0,e=e|0,n||D(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i};w.prototype.readIntBE=function(t,e,n){t=t|0,e=e|0,n||D(t,e,this.length);for(var i=e,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};w.prototype.readInt8=function(t,e){return e||D(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};w.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};w.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};w.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};w.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};w.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),dr(this,t,!0,23,4)};w.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),dr(this,t,!1,23,4)};w.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),dr(this,t,!0,52,8)};w.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),dr(this,t,!1,52,8)};w.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;q(this,t,e,n,o,0)}var a=1,s=0;for(this[e]=t&255;++s<n&&(a*=256);)this[e+s]=t/a&255;return e+n};w.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;q(this,t,e,n,o,0)}var a=n-1,s=1;for(this[e+a]=t&255;--a>=0&&(s*=256);)this[e+a]=t/s&255;return e+n};w.prototype.writeUInt8=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,1,255,0),w.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t&255,e+1};w.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):hr(this,t,e,!0),e+2};w.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):hr(this,t,e,!1),e+2};w.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255):cr(this,t,e,!0),e+4};w.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):cr(this,t,e,!1),e+4};w.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);q(this,t,e,n,o-1,-o)}var a=0,s=1,l=0;for(this[e]=t&255;++a<n&&(s*=256);)t<0&&l===0&&this[e+a-1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};w.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);q(this,t,e,n,o-1,-o)}var a=n-1,s=1,l=0;for(this[e+a]=t&255;--a>=0&&(s*=256);)t<0&&l===0&&this[e+a+1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};w.prototype.writeInt8=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,1,127,-128),w.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t&255,e+1};w.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):hr(this,t,e,!0),e+2};w.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):hr(this,t,e,!1),e+2};w.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,4,2147483647,-2147483648),w.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):cr(this,t,e,!0),e+4};w.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e|0,n||q(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):cr(this,t,e,!1),e+4};w.prototype.writeFloatLE=function(t,e,n){return to(this,t,e,!0,n)};w.prototype.writeFloatBE=function(t,e,n){return to(this,t,e,!1,n)};w.prototype.writeDoubleLE=function(t,e,n){return ro(this,t,e,!0,n)};w.prototype.writeDoubleBE=function(t,e,n){return ro(this,t,e,!1,n)};w.prototype.copy=function(t,e,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n,a;if(this===t&&n<e&&e<i)for(a=o-1;a>=0;--a)t[a+e]=this[a+n];else if(o<1e3||!w.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o};w.prototype.fill=function(t,e,n,i){if(typeof t=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!w.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=e;a<n;++a)this[a]=t;else{var s=pe(t)?t:lr(new w(t,i).toString()),l=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%l]}return this};pu=/[^+\/0-9A-Za-z-_]/g});var m=P(()=>{ao()});function At(){if(!mr&&(mr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!mr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mr(vu)}var mr,vu,sn=P(()=>{d();m();vu=new Uint8Array(16)});var so,fo=P(()=>{d();m();so=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Eu(r){return typeof r=="string"&&so.test(r)}var ke,Ct=P(()=>{d();m();fo();ke=Eu});function Tu(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(M[r[t+0]]+M[r[t+1]]+M[r[t+2]]+M[r[t+3]]+"-"+M[r[t+4]]+M[r[t+5]]+"-"+M[r[t+6]]+M[r[t+7]]+"-"+M[r[t+8]]+M[r[t+9]]+"-"+M[r[t+10]]+M[r[t+11]]+M[r[t+12]]+M[r[t+13]]+M[r[t+14]]+M[r[t+15]]).toLowerCase();if(!ke(e))throw TypeError("Stringified UUID is invalid");return e}var M,wr,Ie,Rt=P(()=>{d();m();Ct();M=[];for(wr=0;wr<256;++wr)M.push((wr+256).toString(16).substr(1));Ie=Tu});function Au(r,t,e){var n=t&&e||0,i=t||new Array(16);r=r||{};var o=r.node||uo,a=r.clockseq!==void 0?r.clockseq:fn;if(o==null||a==null){var s=r.random||(r.rng||At)();o==null&&(o=uo=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),a==null&&(a=fn=(s[6]<<8|s[7])&16383)}var l=r.msecs!==void 0?r.msecs:Date.now(),u=r.nsecs!==void 0?r.nsecs:ln+1,f=l-un+(u-ln)/1e4;if(f<0&&r.clockseq===void 0&&(a=a+1&16383),(f<0||l>un)&&r.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");un=l,ln=u,fn=a,l+=122192928e5;var c=((l&268435455)*1e4+u)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=c&255;var p=l/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(var h=0;h<6;++h)i[n+h]=o[h];return t||Ie(i)}var uo,fn,un,ln,lo,ho=P(()=>{d();m();sn();Rt();un=0,ln=0;lo=Au});function Cu(r){if(!ke(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var gr,hn=P(()=>{d();m();Ct();gr=Cu});function Ru(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}function _r(r,t,e){function n(i,o,a,s){if(typeof i=="string"&&(i=Ru(i)),typeof o=="string"&&(o=gr(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(o),l.set(i,o.length),l=e(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,a){s=s||0;for(var u=0;u<16;++u)a[s+u]=l[u];return a}return Ie(l)}try{n.name=r}catch(i){}return n.DNS=Su,n.URL=ku,n}var Su,ku,cn=P(()=>{d();m();Rt();hn();Su="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ku="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Iu(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return $u(Fu(Nu(r),r.length*8))}function $u(r){for(var t=[],e=r.length*32,n="0123456789abcdef",i=0;i<e;i+=8){var o=r[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(a)}return t}function co(r){return(r+64>>>9<<4)+14+1}function Fu(r,t){r[t>>5]|=128<<t%32,r[co(t)-1]=t;for(var e=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<r.length;a+=16){var s=e,l=n,u=i,f=o;e=Z(e,n,i,o,r[a],7,-680876936),o=Z(o,e,n,i,r[a+1],12,-389564586),i=Z(i,o,e,n,r[a+2],17,606105819),n=Z(n,i,o,e,r[a+3],22,-1044525330),e=Z(e,n,i,o,r[a+4],7,-176418897),o=Z(o,e,n,i,r[a+5],12,1200080426),i=Z(i,o,e,n,r[a+6],17,-1473231341),n=Z(n,i,o,e,r[a+7],22,-45705983),e=Z(e,n,i,o,r[a+8],7,1770035416),o=Z(o,e,n,i,r[a+9],12,-1958414417),i=Z(i,o,e,n,r[a+10],17,-42063),n=Z(n,i,o,e,r[a+11],22,-1990404162),e=Z(e,n,i,o,r[a+12],7,1804603682),o=Z(o,e,n,i,r[a+13],12,-40341101),i=Z(i,o,e,n,r[a+14],17,-1502002290),n=Z(n,i,o,e,r[a+15],22,1236535329),e=Y(e,n,i,o,r[a+1],5,-165796510),o=Y(o,e,n,i,r[a+6],9,-1069501632),i=Y(i,o,e,n,r[a+11],14,643717713),n=Y(n,i,o,e,r[a],20,-373897302),e=Y(e,n,i,o,r[a+5],5,-701558691),o=Y(o,e,n,i,r[a+10],9,38016083),i=Y(i,o,e,n,r[a+15],14,-660478335),n=Y(n,i,o,e,r[a+4],20,-405537848),e=Y(e,n,i,o,r[a+9],5,568446438),o=Y(o,e,n,i,r[a+14],9,-1019803690),i=Y(i,o,e,n,r[a+3],14,-187363961),n=Y(n,i,o,e,r[a+8],20,1163531501),e=Y(e,n,i,o,r[a+13],5,-1444681467),o=Y(o,e,n,i,r[a+2],9,-51403784),i=Y(i,o,e,n,r[a+7],14,1735328473),n=Y(n,i,o,e,r[a+12],20,-1926607734),e=H(e,n,i,o,r[a+5],4,-378558),o=H(o,e,n,i,r[a+8],11,-2022574463),i=H(i,o,e,n,r[a+11],16,1839030562),n=H(n,i,o,e,r[a+14],23,-35309556),e=H(e,n,i,o,r[a+1],4,-1530992060),o=H(o,e,n,i,r[a+4],11,1272893353),i=H(i,o,e,n,r[a+7],16,-155497632),n=H(n,i,o,e,r[a+10],23,-1094730640),e=H(e,n,i,o,r[a+13],4,681279174),o=H(o,e,n,i,r[a],11,-358537222),i=H(i,o,e,n,r[a+3],16,-722521979),n=H(n,i,o,e,r[a+6],23,76029189),e=H(e,n,i,o,r[a+9],4,-640364487),o=H(o,e,n,i,r[a+12],11,-421815835),i=H(i,o,e,n,r[a+15],16,530742520),n=H(n,i,o,e,r[a+2],23,-995338651),e=j(e,n,i,o,r[a],6,-198630844),o=j(o,e,n,i,r[a+7],10,1126891415),i=j(i,o,e,n,r[a+14],15,-1416354905),n=j(n,i,o,e,r[a+5],21,-57434055),e=j(e,n,i,o,r[a+12],6,1700485571),o=j(o,e,n,i,r[a+3],10,-1894986606),i=j(i,o,e,n,r[a+10],15,-1051523),n=j(n,i,o,e,r[a+1],21,-2054922799),e=j(e,n,i,o,r[a+8],6,1873313359),o=j(o,e,n,i,r[a+15],10,-30611744),i=j(i,o,e,n,r[a+6],15,-1560198380),n=j(n,i,o,e,r[a+13],21,1309151649),e=j(e,n,i,o,r[a+4],6,-145523070),o=j(o,e,n,i,r[a+11],10,-1120210379),i=j(i,o,e,n,r[a+2],15,718787259),n=j(n,i,o,e,r[a+9],21,-343485551),e=$e(e,s),n=$e(n,l),i=$e(i,u),o=$e(o,f)}return[e,n,i,o]}function Nu(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(co(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function $e(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Uu(r,t){return r<<t|r>>>32-t}function br(r,t,e,n,i,o){return $e(Uu($e($e(t,r),$e(n,o)),i),e)}function Z(r,t,e,n,i,o,a){return br(t&e|~t&n,r,t,i,o,a)}function Y(r,t,e,n,i,o,a){return br(t&n|e&~n,r,t,i,o,a)}function H(r,t,e,n,i,o,a){return br(t^e^n,r,t,i,o,a)}function j(r,t,e,n,i,o,a){return br(e^(t|~n),r,t,i,o,a)}var po,mo=P(()=>{d();m();po=Iu});var Bu,wo,go=P(()=>{d();m();cn();mo();Bu=_r("v3",48,po),wo=Bu});function Ou(r,t,e){r=r||{};var n=r.random||(r.rng||At)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=n[i];return t}return Ie(n)}var _o,bo=P(()=>{d();m();sn();Rt();_o=Ou});function Pu(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function pn(r,t){return r<<t|r>>>32-t}function Du(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var o=r.length/4+2,a=Math.ceil(o/16),s=new Array(a),l=0;l<a;++l){for(var u=new Uint32Array(16),f=0;f<16;++f)u[f]=r[l*64+f*4]<<24|r[l*64+f*4+1]<<16|r[l*64+f*4+2]<<8|r[l*64+f*4+3];s[l]=u}s[a-1][14]=(r.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(r.length-1)*8&4294967295;for(var c=0;c<a;++c){for(var p=new Uint32Array(80),h=0;h<16;++h)p[h]=s[c][h];for(var g=16;g<80;++g)p[g]=pn(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var _=e[0],T=e[1],A=e[2],S=e[3],E=e[4],x=0;x<80;++x){var R=Math.floor(x/20),$=pn(_,5)+Pu(R,T,A,S)+E+t[R]+p[x]>>>0;E=S,S=A,A=pn(T,30)>>>0,T=_,_=$}e[0]=e[0]+_>>>0,e[1]=e[1]+T>>>0,e[2]=e[2]+A>>>0,e[3]=e[3]+S>>>0,e[4]=e[4]+E>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var xo,yo=P(()=>{d();m();xo=Du});var zu,vo,Eo=P(()=>{d();m();cn();yo();zu=_r("v5",80,xo),vo=zu});var To,Ao=P(()=>{d();m();To="00000000-0000-0000-0000-000000000000"});function Lu(r){if(!ke(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var Co,Ro=P(()=>{d();m();Ct();Co=Lu});var So={};_f(So,{NIL:()=>To,parse:()=>gr,stringify:()=>Ie,v1:()=>lo,v3:()=>wo,v4:()=>_o,v5:()=>vo,validate:()=>ke,version:()=>Co});var ko=P(()=>{d();m();ho();go();bo();Eo();Ao();Ro();Ct();Rt();hn()});var Io=ne(St=>{d();m();var xr=(ko(),bf(So)),dn=(()=>typeof w!="undefined"?r=>w.from(r).toString("base64"):r=>btoa(String.fromCharCode(...r)))(),Mu=(()=>typeof w!="undefined"?r=>w.from(r,"base64"):r=>Uint8Array.from(atob(r),t=>t.charCodeAt(0)))();St.encode=function(r){var t=xr.parse(r),e=dn(t),n=e.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return n};St.decode=function(r){var t=r.replace(/-/g,"+").replace(/_/g,"/")+"==";return xr.stringify(Mu(t))};St.v4=function(){var r=xr.v4(null,new Uint8Array(16)),t=dn(r),e=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return e};St.nice=function(){var r=xr.v4(null,new Uint8Array(16));r[0]=r[0]&127;var t=dn(r),e=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return e}});var Fo=ne((od,$o)=>{d();m();$o.exports=Io()});var na=ne(It=>{"use strict";d();m();Object.defineProperty(It,"__esModule",{value:!0});function yn(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function ea(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function vn(r,t,e){return t&&ea(r.prototype,t),e&&ea(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function bl(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&xn(r,t)}function at(r){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},at(r)}function xn(r,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},xn(r,t)}function xl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function kt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function yl(r,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kt(r)}function vl(r){var t=xl();return function(){var n=at(r),i;if(t){var o=at(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return yl(this,i)}}function El(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=at(r),r!==null););return r}function Ir(){return typeof Reflect!="undefined"&&Reflect.get?Ir=Reflect.get.bind():Ir=function(t,e,n){var i=El(t,e);if(!!i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ir.apply(this,arguments)}var ta=function(){function r(){yn(this,r),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return vn(r,[{key:"addEventListener",value:function(e,n,i){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:n,options:i})}},{key:"removeEventListener",value:function(e,n){if(e in this.listeners){for(var i=this.listeners[e],o=0,a=i.length;o<a;o++)if(i[o].callback===n){i.splice(o,1);return}}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var n=this.listeners[e.type],i=n.slice(),o=0,a=i.length;o<a;o++){var s=i[o];try{s.callback.call(this,e)}catch(l){Promise.resolve().then(function(){throw l})}s.options&&s.options.once&&this.removeEventListener(e.type,s.callback)}return!e.defaultPrevented}}}]),r}(),En=function(r){bl(e,r);var t=vl(e);function e(){var n;return yn(this,e),n=t.call(this),n.listeners||ta.call(kt(n)),Object.defineProperty(kt(n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(kt(n),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(kt(n),"reason",{value:void 0,writable:!0,configurable:!0}),n}return vn(e,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(i){i.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,i)),Ir(at(e.prototype),"dispatchEvent",this).call(this,i)}}]),e}(ta),ra=function(){function r(){yn(this,r),Object.defineProperty(this,"signal",{value:new En,writable:!0,configurable:!0})}return vn(r,[{key:"abort",value:function(e){var n;try{n=new Event("abort")}catch(o){typeof document!="undefined"?document.createEvent?(n=document.createEvent("Event"),n.initEvent("abort",!1,!1)):(n=document.createEventObject(),n.type="abort"):n={type:"abort",bubbles:!1,cancelable:!1}}var i=e;if(i===void 0)if(typeof document=="undefined")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch(o){i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(n)}},{key:"toString",value:function(){return"[object AbortController]"}}]),r}();typeof Symbol!="undefined"&&Symbol.toStringTag&&(ra.prototype[Symbol.toStringTag]="AbortController",En.prototype[Symbol.toStringTag]="AbortSignal");function Tl(r){return r.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof r.Request=="function"&&!r.Request.prototype.hasOwnProperty("signal")||!r.AbortController}function Al(r){typeof r=="function"&&(r={fetch:r});var t=r,e=t.fetch,n=t.Request,i=n===void 0?e.Request:n,o=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=a===void 0?!1:a;if(!Tl({fetch:e,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:e,Request:l};var l=i;(l&&!l.prototype.hasOwnProperty("signal")||s)&&(l=function(p,h){var g;h&&h.signal&&(g=h.signal,delete h.signal);var _=new i(p,h);return g&&Object.defineProperty(_,"signal",{writable:!1,enumerable:!1,configurable:!0,value:g}),_},l.prototype=i.prototype);var u=e,f=function(p,h){var g=l&&l.prototype.isPrototypeOf(p)?p.signal:h?h.signal:void 0;if(g){var _;try{_=new DOMException("Aborted","AbortError")}catch(A){_=new Error("Aborted"),_.name="AbortError"}if(g.aborted)return Promise.reject(_);var T=new Promise(function(A,S){g.addEventListener("abort",function(){return S(_)},{once:!0})});return h&&h.signal&&delete h.signal,Promise.race([T,u(p,h)])}return u(p,h)};return{fetch:f,Request:l}}It.AbortController=ra;It.AbortSignal=En;It.abortableFetch=Al});var Tn=ne(st=>{"use strict";d();m();Object.defineProperty(st,"__esModule",{value:!0});st.AbortSignal=st.AbortController=void 0;var ia=na(),$r=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof globalThis!="undefined")return globalThis;throw new Error("unable to locate global object")},Cl=typeof $r().AbortController=="undefined"?ia.AbortController:$r().AbortController;st.AbortController=Cl;var Rl=typeof $r().AbortController=="undefined"?ia.AbortSignal:$r().AbortSignal;st.AbortSignal=Rl});var oa=ne(Rn=>{"use strict";d();m();Object.defineProperty(Rn,"__esModule",{value:!0});var Sl=Tn(),An=class{},Cn=class{constructor(){this.signals=new Set,this.abortController=new Sl.AbortController}addSignal(t=new An){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(t),t.aborted?this.handleAborted(t):typeof t.addEventListener=="function"&&t.addEventListener("abort",()=>{this.handleAborted(t)})}handleAborted(t){this.signals.delete(t),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}};Rn.default=Cn});var aa=ne(kn=>{"use strict";d();m();Object.defineProperty(kn,"__esModule",{value:!0});var Sn=class{constructor(){this.callbacks=new Set}addCallback(t=()=>{}){this.callbacks.add(t),t(this.currentMessage)}callback(t){this.currentMessage=t,this.callbacks.forEach(e=>{e(t)})}};kn.default=Sn});var fa=ne($t=>{"use strict";d();m();var sa=$t&&$t.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($t,"__esModule",{value:!0});var kl=Tn(),Il=sa(oa()),$l=sa(aa()),ft=class{constructor({fill:t,cache:e}){if(typeof t!="function")throw new TypeError("must pass a fill function");if(typeof e!="object")throw new TypeError("must pass a cache object");if(typeof e.get!="function"||typeof e.set!="function"||typeof e.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=e,this.fillCallback=t}static isAbortException(t){return t.name==="AbortError"||t.code==="ERR_ABORTED"||t.message==="AbortError: aborted"||t.message==="Error: aborted"}evict(t,e){this.cache.get(t)===e&&this.cache.delete(t)}fill(t,e,n,i){let o=new Il.default,a=new $l.default;a.addCallback(i);let s={aborter:o,promise:this.fillCallback(e,o.signal,l=>{a.callback(l)}),settled:!1,statusReporter:a,get aborted(){return this.aborter.signal.aborted}};s.aborter.addSignal(n),s.aborter.signal.addEventListener("abort",()=>{s.settled||this.evict(t,s)}),s.promise.then(()=>{s.settled=!0},()=>{s.settled=!0,this.evict(t,s)}).catch(l=>{throw console.error(l),l}),this.cache.set(t,s)}static checkSinglePromise(t,e){function n(){if(e&&e.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return t.then(i=>(n(),i),i=>{throw n(),i})}has(t){return this.cache.has(t)}get(t,e,n,i){if(!n&&e instanceof kl.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");let o=this.cache.get(t);return o?o.aborted&&!o.settled?(this.evict(t,o),this.get(t,e,n,i)):o.settled?o.promise:(o.aborter.addSignal(n),o.statusReporter.addCallback(i),ft.checkSinglePromise(o.promise,n)):(this.fill(t,e,n,i),ft.checkSinglePromise(this.cache.get(t).promise,n))}delete(t){let e=this.cache.get(t);e&&(e.settled||e.aborter.abort(),this.cache.delete(t))}clear(){let t=this.cache.keys(),e=0;for(let n=t.next();!n.done;n=t.next())this.delete(n.value),e+=1;return e}};$t.default=ft});var In=ne(Ft=>{"use strict";d();m();var Fl=Ft&&Ft.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ft,"__esModule",{value:!0});var Nl=Fl(fa());Ft.default=Nl.default});var Fn=ne((gd,ua)=>{"use strict";d();m();var $n=class{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){let e=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,e),e}}set(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){let e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[t]of this)yield t}*values(){for(let[,t]of this)yield t}*[Symbol.iterator](){for(let t of this.cache)yield t;for(let t of this.oldCache){let[e]=t;this.cache.has(e)||(yield t)}}get size(){let t=0;for(let e of this.oldCache.keys())this.cache.has(e)||t++;return this._size+t}};ua.exports=$n});var hi=ne(()=>{d();m()});var Xs=ne(()=>{d();m()});var Js=ne((Kr,tr)=>{d();m();(function(r){var t=typeof Kr=="object"&&Kr,e=typeof tr=="object"&&tr&&tr.exports==t&&tr,n=typeof globalThis=="object"&&globalThis;(n.global===n||n.window===n)&&(r=n);var i=function(p){this.message=p};i.prototype=new Error,i.prototype.name="InvalidCharacterError";var o=function(p){throw new i(p)},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/[\t\n\f\r ]/g,l=function(p){p=String(p).replace(s,"");var h=p.length;h%4==0&&(p=p.replace(/==?$/,""),h=p.length),(h%4==1||/[^+a-zA-Z0-9/]/.test(p))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var g=0,_,T,A="",S=-1;++S<h;)T=a.indexOf(p.charAt(S)),_=g%4?_*64+T:T,g++%4&&(A+=String.fromCharCode(255&_>>(-2*g&6)));return A},u=function(p){p=String(p),/[^\0-\xFF]/.test(p)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var h=p.length%3,g="",_=-1,T,A,S,E,x=p.length-h;++_<x;)T=p.charCodeAt(_)<<16,A=p.charCodeAt(++_)<<8,S=p.charCodeAt(++_),E=T+A+S,g+=a.charAt(E>>18&63)+a.charAt(E>>12&63)+a.charAt(E>>6&63)+a.charAt(E&63);return h==2?(T=p.charCodeAt(_)<<8,A=p.charCodeAt(++_),E=T+A,g+=a.charAt(E>>10)+a.charAt(E>>4&63)+a.charAt(E<<2&63)+"="):h==1&&(E=p.charCodeAt(_),g+=a.charAt(E>>2)+a.charAt(E<<4&63)+"=="),g},f={encode:u,decode:l,version:"1.0.0"};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd)define(function(){return f});else if(t&&!t.nodeType)if(e)e.exports=f;else for(var c in f)f.hasOwnProperty(c)&&(t[c]=f[c]);else r.base64=f})(Kr)});d();m();d();m();var lf=xe(Fo(),1);d();m();d();m();d();m();var yr=BigInt(32);function No(r,t,e){let n=Number(!!e),i=Number(!e);return BigInt(r.getInt32(t,e)*i+r.getInt32(t+4,e)*n)<<yr|BigInt(r.getUint32(t,e)*n+r.getUint32(t+4,e)*i)}function Uo(r,t,e){let n=r.getUint32(t,e),i=r.getUint32(t+4,e),o=Number(!!e),a=Number(!e);return BigInt(n*a+i*o)<<yr|BigInt(n*o+i*a)}function Bo(r,t,e,n){let i=Number(e>>yr),o=Number(e&BigInt(4294967295));n?(r.setInt32(t+4,i,n),r.setUint32(t,o,n)):(r.setInt32(t,i,n),r.setUint32(t+4,o,n))}function Oo(r,t,e,n){let i=Number(e>>yr),o=Number(e&BigInt(4294967295));n?(r.setUint32(t+4,i,n),r.setUint32(t,o,n)):(r.setUint32(t,i,n),r.setUint32(t+4,o,n))}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(r,t){return No(this,r,t)});"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(r,t){return Uo(this,r,t)});"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(r,t,e){Bo(this,r,t,e)});"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(r,t,e){Oo(this,r,t,e)});d();m();d();m();d();m();var de=[],oe=[],Vu=typeof Uint8Array!="undefined"?Uint8Array:Array,wn=!1;function Lo(){wn=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=r.length;t<e;++t)de[t]=r[t],oe[r.charCodeAt(t)]=t;oe["-".charCodeAt(0)]=62,oe["_".charCodeAt(0)]=63}function Zu(r){wn||Lo();var t,e,n,i,o,a,s=r.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[s-2]==="="?2:r[s-1]==="="?1:0,a=new Vu(s*3/4-o),n=o>0?s-4:s;var l=0;for(t=0,e=0;t<n;t+=4,e+=3)i=oe[r.charCodeAt(t)]<<18|oe[r.charCodeAt(t+1)]<<12|oe[r.charCodeAt(t+2)]<<6|oe[r.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=i&255;return o===2?(i=oe[r.charCodeAt(t)]<<2|oe[r.charCodeAt(t+1)]>>4,a[l++]=i&255):o===1&&(i=oe[r.charCodeAt(t)]<<10|oe[r.charCodeAt(t+1)]<<4|oe[r.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=i&255),a}function Yu(r){return de[r>>18&63]+de[r>>12&63]+de[r>>6&63]+de[r&63]}function Hu(r,t,e){for(var n,i=[],o=t;o<e;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(Yu(n));return i.join("")}function Po(r){wn||Lo();for(var t,e=r.length,n=e%3,i="",o=[],a=16383,s=0,l=e-n;s<l;s+=a)o.push(Hu(r,s,s+a>l?l:s+a));return n===1?(t=r[e-1],i+=de[t>>2],i+=de[t<<4&63],i+="=="):n===2&&(t=(r[e-2]<<8)+r[e-1],i+=de[t>>10],i+=de[t>>4&63],i+=de[t<<2&63],i+="="),o.push(i),o.join("")}function Tr(r,t,e,n,i){var o,a,s=i*8-n-1,l=(1<<s)-1,u=l>>1,f=-7,c=e?i-1:0,p=e?-1:1,h=r[t+c];for(c+=p,o=h&(1<<-f)-1,h>>=-f,f+=s;f>0;o=o*256+r[t+c],c+=p,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=a*256+r[t+c],c+=p,f-=8);if(o===0)o=1-u;else{if(o===l)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(h?-1:1)*a*Math.pow(2,o-n)}function Mo(r,t,e,n,i,o){var a,s,l,u=o*8-i-1,f=(1<<u)-1,c=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,g=n?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?t+=p/l:t+=p*Math.pow(2,1-c),t*l>=2&&(a++,l/=2),a+c>=f?(s=0,a=f):a+c>=1?(s=(t*l-1)*Math.pow(2,i),a=a+c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;r[e+h]=s&255,h+=g,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;r[e+h]=a&255,h+=g,a/=256,u-=8);r[e+h-g]|=_*128}var ju={}.toString,Vo=Array.isArray||function(r){return ju.call(r)=="[object Array]"};var Wu=50;b.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;var fd=vr();function vr(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ee(r,t){if(vr()<t)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=b.prototype):(r===null&&(r=new b(t)),r.length=t),r}function b(r,t,e){if(!b.TYPED_ARRAY_SUPPORT&&!(this instanceof b))return new b(r,t,e);if(typeof r=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return gn(this,r)}return Zo(this,r,t,e)}b.poolSize=8192;b._augment=function(r){return r.__proto__=b.prototype,r};function Zo(r,t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer?Ku(r,t,e,n):typeof t=="string"?Gu(r,t,e):Xu(r,t)}b.from=function(r,t,e){return Zo(null,r,t,e)};b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array);function Yo(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function qu(r,t,e,n){return Yo(t),t<=0?Ee(r,t):e!==void 0?typeof n=="string"?Ee(r,t).fill(e,n):Ee(r,t).fill(e):Ee(r,t)}b.alloc=function(r,t,e){return qu(null,r,t,e)};function gn(r,t){if(Yo(t),r=Ee(r,t<0?0:_n(t)|0),!b.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)r[e]=0;return r}b.allocUnsafe=function(r){return gn(null,r)};b.allocUnsafeSlow=function(r){return gn(null,r)};function Gu(r,t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!b.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=Ho(t,e)|0;r=Ee(r,n);var i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function mn(r,t){var e=t.length<0?0:_n(t.length)|0;r=Ee(r,e);for(var n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Ku(r,t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return e===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,e):t=new Uint8Array(t,e,n),b.TYPED_ARRAY_SUPPORT?(r=t,r.__proto__=b.prototype):r=mn(r,t),r}function Xu(r,t){if(me(t)){var e=_n(t.length)|0;return r=Ee(r,e),r.length===0||t.copy(r,0,0,e),r}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||wl(t.length)?Ee(r,0):mn(r,t);if(t.type==="Buffer"&&Vo(t.data))return mn(r,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _n(r){if(r>=vr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+vr().toString(16)+" bytes");return r|0}b.isBuffer=gl;function me(r){return!!(r!=null&&r._isBuffer)}b.compare=function(t,e){if(!me(t)||!me(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0};b.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};b.concat=function(t,e){if(!Vo(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return b.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=b.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!me(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};function Ho(r,t){if(me(r))return r.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var e=r.length;if(e===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return Er(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Jo(r).length;default:if(n)return Er(r).length;t=(""+t).toLowerCase(),n=!0}}b.byteLength=Ho;function Ju(r,t,e){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return fl(this,t,e);case"utf8":case"utf-8":return qo(this,t,e);case"ascii":return al(this,t,e);case"latin1":case"binary":return sl(this,t,e);case"base64":return il(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ul(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}b.prototype._isBuffer=!0;function Ve(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}b.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ve(this,e,e+1);return this};b.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ve(this,e,e+3),Ve(this,e+1,e+2);return this};b.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ve(this,e,e+7),Ve(this,e+1,e+6),Ve(this,e+2,e+5),Ve(this,e+3,e+4);return this};b.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?qo(this,0,t):Ju.apply(this,arguments)};b.prototype.equals=function(t){if(!me(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:b.compare(this,t)===0};b.prototype.inspect=function(){var t="",e=Wu;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"};b.prototype.compare=function(t,e,n,i,o){if(!me(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=n-e,l=Math.min(a,s),u=this.slice(i,o),f=t.slice(e,n),c=0;c<l;++c)if(u[c]!==f[c]){a=u[c],s=f[c];break}return a<s?-1:s<a?1:0};function jo(r,t,e,n,i){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(i)return-1;e=r.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof t=="string"&&(t=b.from(t,n)),me(t))return t.length===0?-1:Do(r,t,e,n,i);if(typeof t=="number")return t=t&255,b.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):Do(r,[t],e,n,i);throw new TypeError("val must be string, number or Buffer")}function Do(r,t,e,n,i){var o=1,a=r.length,s=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;o=2,a/=2,s/=2,e/=2}function l(h,g){return o===1?h[g]:h.readUInt16BE(g*o)}var u;if(i){var f=-1;for(u=e;u<a;u++)if(l(r,u)===l(t,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===s)return f*o}else f!==-1&&(u-=u-f),f=-1}else for(e+s>a&&(e=a-s),u=e;u>=0;u--){for(var c=!0,p=0;p<s;p++)if(l(r,u+p)!==l(t,p)){c=!1;break}if(c)return u}return-1}b.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};b.prototype.indexOf=function(t,e,n){return jo(this,t,e,n,!0)};b.prototype.lastIndexOf=function(t,e,n){return jo(this,t,e,n,!1)};function Qu(r,t,e,n){e=Number(e)||0;var i=r.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(a*2,2),16);if(isNaN(s))return a;r[e+a]=s}return a}function el(r,t,e,n){return Rr(Er(t,r.length-e),r,e,n)}function Wo(r,t,e,n){return Rr(dl(t),r,e,n)}function tl(r,t,e,n){return Wo(r,t,e,n)}function rl(r,t,e,n){return Rr(Jo(t),r,e,n)}function nl(r,t,e,n){return Rr(ml(t,r.length-e),r,e,n)}b.prototype.write=function(t,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Qu(this,t,e,n);case"utf8":case"utf-8":return el(this,t,e,n);case"ascii":return Wo(this,t,e,n);case"latin1":case"binary":return tl(this,t,e,n);case"base64":return rl(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nl(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function il(r,t,e){return t===0&&e===r.length?Po(r):Po(r.slice(t,e))}function qo(r,t,e){e=Math.min(r.length,e);for(var n=[],i=t;i<e;){var o=r[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=e){var l,u,f,c;switch(s){case 1:o<128&&(a=o);break;case 2:l=r[i+1],(l&192)===128&&(c=(o&31)<<6|l&63,c>127&&(a=c));break;case 3:l=r[i+1],u=r[i+2],(l&192)===128&&(u&192)===128&&(c=(o&15)<<12|(l&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:l=r[i+1],u=r[i+2],f=r[i+3],(l&192)===128&&(u&192)===128&&(f&192)===128&&(c=(o&15)<<18|(l&63)<<12|(u&63)<<6|f&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=s}return ol(n)}var zo=4096;function ol(r){var t=r.length;if(t<=zo)return String.fromCharCode.apply(String,r);for(var e="",n=0;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=zo));return e}function al(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]&127);return n}function sl(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]);return n}function fl(r,t,e){var n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=t;o<e;++o)i+=pl(r[o]);return i}function ul(r,t,e){for(var n=r.slice(t,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}b.prototype.slice=function(t,e){var n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(b.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=b.prototype;else{var o=e-t;i=new b(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};function z(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(t,e,n){t=t|0,e=e|0,n||z(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return i};b.prototype.readUIntBE=function(t,e,n){t=t|0,e=e|0,n||z(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i};b.prototype.readUInt8=function(t,e){return e||z(t,1,this.length),this[t]};b.prototype.readUInt16LE=function(t,e){return e||z(t,2,this.length),this[t]|this[t+1]<<8};b.prototype.readUInt16BE=function(t,e){return e||z(t,2,this.length),this[t]<<8|this[t+1]};b.prototype.readUInt32LE=function(t,e){return e||z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};b.prototype.readUInt32BE=function(t,e){return e||z(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};b.prototype.readIntLE=function(t,e,n){t=t|0,e=e|0,n||z(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i};b.prototype.readIntBE=function(t,e,n){t=t|0,e=e|0,n||z(t,e,this.length);for(var i=e,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};b.prototype.readInt8=function(t,e){return e||z(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};b.prototype.readInt16LE=function(t,e){e||z(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};b.prototype.readInt16BE=function(t,e){e||z(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};b.prototype.readInt32LE=function(t,e){return e||z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};b.prototype.readInt32BE=function(t,e){return e||z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};b.prototype.readFloatLE=function(t,e){return e||z(t,4,this.length),Tr(this,t,!0,23,4)};b.prototype.readFloatBE=function(t,e){return e||z(t,4,this.length),Tr(this,t,!1,23,4)};b.prototype.readDoubleLE=function(t,e){return e||z(t,8,this.length),Tr(this,t,!0,52,8)};b.prototype.readDoubleBE=function(t,e){return e||z(t,8,this.length),Tr(this,t,!1,52,8)};function G(r,t,e,n,i,o){if(!me(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;G(this,t,e,n,o,0)}var a=1,s=0;for(this[e]=t&255;++s<n&&(a*=256);)this[e+s]=t/a&255;return e+n};b.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;G(this,t,e,n,o,0)}var a=n-1,s=1;for(this[e+a]=t&255;--a>=0&&(s*=256);)this[e+a]=t/s&255;return e+n};b.prototype.writeUInt8=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,1,255,0),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t&255,e+1};function Ar(r,t,e,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(r.length-e,2);i<o;++i)r[e+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}b.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):Ar(this,t,e,!0),e+2};b.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):Ar(this,t,e,!1),e+2};function Cr(r,t,e,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(r.length-e,4);i<o;++i)r[e+i]=t>>>(n?i:3-i)*8&255}b.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255):Cr(this,t,e,!0),e+4};b.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):Cr(this,t,e,!1),e+4};b.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);G(this,t,e,n,o-1,-o)}var a=0,s=1,l=0;for(this[e]=t&255;++a<n&&(s*=256);)t<0&&l===0&&this[e+a-1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};b.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);G(this,t,e,n,o-1,-o)}var a=n-1,s=1,l=0;for(this[e+a]=t&255;--a>=0&&(s*=256);)t<0&&l===0&&this[e+a+1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};b.prototype.writeInt8=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,1,127,-128),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t&255,e+1};b.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):Ar(this,t,e,!0),e+2};b.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):Ar(this,t,e,!1),e+2};b.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Cr(this,t,e,!0),e+4};b.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e|0,n||G(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):Cr(this,t,e,!1),e+4};function Go(r,t,e,n,i,o){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Ko(r,t,e,n,i){return i||Go(r,t,e,4),Mo(r,t,e,n,23,4),e+4}b.prototype.writeFloatLE=function(t,e,n){return Ko(this,t,e,!0,n)};b.prototype.writeFloatBE=function(t,e,n){return Ko(this,t,e,!1,n)};function Xo(r,t,e,n,i){return i||Go(r,t,e,8),Mo(r,t,e,n,52,8),e+8}b.prototype.writeDoubleLE=function(t,e,n){return Xo(this,t,e,!0,n)};b.prototype.writeDoubleBE=function(t,e,n){return Xo(this,t,e,!1,n)};b.prototype.copy=function(t,e,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n,a;if(this===t&&n<e&&e<i)for(a=o-1;a>=0;--a)t[a+e]=this[a+n];else if(o<1e3||!b.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o};b.prototype.fill=function(t,e,n,i){if(typeof t=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!b.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=e;a<n;++a)this[a]=t;else{var s=me(t)?t:Er(new b(t,i).toString()),l=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%l]}return this};var ll=/[^+\/0-9A-Za-z-_]/g;function hl(r){if(r=cl(r).replace(ll,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function cl(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function pl(r){return r<16?"0"+r.toString(16):r.toString(16)}function Er(r,t){t=t||1/0;for(var e,n=r.length,i=null,o=[],a=0;a<n;++a){if(e=r.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function dl(r){for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function ml(r,t){for(var e,n,i,o=[],a=0;a<r.length&&!((t-=2)<0);++a)e=r.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function Jo(r){return Zu(hl(r))}function Rr(r,t,e,n){for(var i=0;i<n&&!(i+e>=t.length||i>=r.length);++i)t[i+e]=r[i];return i}function wl(r){return r!==r}function gl(r){return r!=null&&(!!r._isBuffer||Qo(r)||_l(r))}function Qo(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function _l(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Qo(r.slice(0,0))}d();m();var bn=class{constructor(t,e){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=t,this.useContextVariables=e}generateVariable(t){let e=[...this.scopes[this.scopes.length-1]];return t&&e.push(t),e.join(".")}generateOption(t){switch(typeof t){case"number":return t.toString();case"string":return this.generateVariable(t);case"function":return`${this.addImport(t)}.call(${this.generateVariable()}, vars)`}}generateError(t){this.pushCode(`throw new Error(${t});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(t){this.code+=t+`
`}pushPath(t){t&&this.scopes[this.scopes.length-1].push(t)}popPath(t){t&&this.scopes[this.scopes.length-1].pop()}pushScope(t){this.scopes.push([t])}popScope(){this.scopes.pop()}addImport(t){if(!this.importPath)return`(${t})`;let e=this.reverseImports.get(t);return e||(e=this.imports.push(t)-1,this.reverseImports.set(t,e)),`${this.importPath}[${e}]`}addReference(t){this.references.has(t)||this.references.set(t,{resolved:!1,requested:!1})}markResolved(t){let e=this.references.get(t);e&&(e.resolved=!0)}markRequested(t){t.forEach(e=>{let n=this.references.get(e);n&&(n.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([t,e])=>!e.resolved&&!e.requested).map(([t,e])=>t)}},ue=new Map,Ze="___parser_",le={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},Sr={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},kr={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},N=class{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new N}primitiveGenerateN(t,e){let n=Sr[t],i=kr[t];e.pushCode(`${e.generateVariable(this.varName)} = dataView.get${n}(offset, ${i});`),e.pushCode(`offset += ${le[t]};`)}primitiveN(t,e,n){return this.setNextParser(t,e,n)}useThisEndian(t){return t+this.endian.toLowerCase()}uint8(t,e={}){return this.primitiveN("uint8",t,e)}uint16(t,e={}){return this.primitiveN(this.useThisEndian("uint16"),t,e)}uint16le(t,e={}){return this.primitiveN("uint16le",t,e)}uint16be(t,e={}){return this.primitiveN("uint16be",t,e)}uint32(t,e={}){return this.primitiveN(this.useThisEndian("uint32"),t,e)}uint32le(t,e={}){return this.primitiveN("uint32le",t,e)}uint32be(t,e={}){return this.primitiveN("uint32be",t,e)}int8(t,e={}){return this.primitiveN("int8",t,e)}int16(t,e={}){return this.primitiveN(this.useThisEndian("int16"),t,e)}int16le(t,e={}){return this.primitiveN("int16le",t,e)}int16be(t,e={}){return this.primitiveN("int16be",t,e)}int32(t,e={}){return this.primitiveN(this.useThisEndian("int32"),t,e)}int32le(t,e={}){return this.primitiveN("int32le",t,e)}int32be(t,e={}){return this.primitiveN("int32be",t,e)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(t,e={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),t,e)}int64be(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",t,e)}int64le(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",t,e)}uint64(t,e={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),t,e)}uint64be(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",t,e)}uint64le(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",t,e)}floatle(t,e={}){return this.primitiveN("floatle",t,e)}floatbe(t,e={}){return this.primitiveN("floatbe",t,e)}doublele(t,e={}){return this.primitiveN("doublele",t,e)}doublebe(t,e={}){return this.primitiveN("doublebe",t,e)}bitN(t,e,n){return n.length=t,this.setNextParser("bit",e,n)}bit1(t,e={}){return this.bitN(1,t,e)}bit2(t,e={}){return this.bitN(2,t,e)}bit3(t,e={}){return this.bitN(3,t,e)}bit4(t,e={}){return this.bitN(4,t,e)}bit5(t,e={}){return this.bitN(5,t,e)}bit6(t,e={}){return this.bitN(6,t,e)}bit7(t,e={}){return this.bitN(7,t,e)}bit8(t,e={}){return this.bitN(8,t,e)}bit9(t,e={}){return this.bitN(9,t,e)}bit10(t,e={}){return this.bitN(10,t,e)}bit11(t,e={}){return this.bitN(11,t,e)}bit12(t,e={}){return this.bitN(12,t,e)}bit13(t,e={}){return this.bitN(13,t,e)}bit14(t,e={}){return this.bitN(14,t,e)}bit15(t,e={}){return this.bitN(15,t,e)}bit16(t,e={}){return this.bitN(16,t,e)}bit17(t,e={}){return this.bitN(17,t,e)}bit18(t,e={}){return this.bitN(18,t,e)}bit19(t,e={}){return this.bitN(19,t,e)}bit20(t,e={}){return this.bitN(20,t,e)}bit21(t,e={}){return this.bitN(21,t,e)}bit22(t,e={}){return this.bitN(22,t,e)}bit23(t,e={}){return this.bitN(23,t,e)}bit24(t,e={}){return this.bitN(24,t,e)}bit25(t,e={}){return this.bitN(25,t,e)}bit26(t,e={}){return this.bitN(26,t,e)}bit27(t,e={}){return this.bitN(27,t,e)}bit28(t,e={}){return this.bitN(28,t,e)}bit29(t,e={}){return this.bitN(29,t,e)}bit30(t,e={}){return this.bitN(30,t,e)}bit31(t,e={}){return this.bitN(31,t,e)}bit32(t,e={}){return this.bitN(32,t,e)}namely(t){return ue.set(t,this),this.alias=t,this}skip(t,e={}){return this.seek(t,e)}seek(t,e={}){if(e.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:t})}string(t,e){if(!e.zeroTerminated&&!e.length&&!e.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((e.zeroTerminated||e.length)&&e.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(e.stripNull&&!(e.length||e.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return e.encoding=e.encoding||"utf8",this.setNextParser("string",t,e)}buffer(t,e){if(!e.length&&!e.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",t,e)}wrapped(t,e){if(typeof e!="object"&&typeof t=="object"&&(e=t,t=""),!e||!e.wrapper||!e.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!e.length&&!e.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",t,e)}array(t,e){if(!e.readUntil&&!e.length&&!e.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!e.type)throw new Error("type is required for array.");if(typeof e.type=="string"&&!ue.has(e.type)&&!(e.type in le))throw new Error(`Array element type "${e.type}" is unkown.`);return this.setNextParser("array",t,e)}choice(t,e){if(typeof e!="object"&&typeof t=="object"&&(e=t,t=""),!e)throw new Error("tag and choices are are required for choice.");if(!e.tag)throw new Error("tag is requird for choice.");if(!e.choices)throw new Error("choices is required for choice.");for(let n in e.choices){let i=parseInt(n,10),o=e.choices[i];if(isNaN(i))throw new Error(`Choice key "${n}" is not a number.`);if(typeof o=="string"&&!ue.has(o)&&!(o in le))throw new Error(`Choice type "${o}" is unkown.`)}return this.setNextParser("choice",t,e)}nest(t,e){if(typeof e!="object"&&typeof t=="object"&&(e=t,t=""),!e||!e.type)throw new Error("type is required for nest.");if(!(e.type instanceof N)&&!ue.has(e.type))throw new Error("type must be a known parser name or a Parser object.");if(!(e.type instanceof N)&&!t)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",t,e)}pointer(t,e){if(!e.offset)throw new Error("offset is required for pointer.");if(!e.type)throw new Error("type is required for pointer.");if(typeof e.type=="string"&&!(e.type in le)&&!ue.has(e.type))throw new Error(`Pointer type "${e.type}" is unkown.`);return this.setNextParser("pointer",t,e)}saveOffset(t,e={}){return this.setNextParser("saveOffset",t,e)}endianness(t){switch(t.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(t){return this.endianness(t)}useContextVars(t=!0){return this.useContextVariables=t,this}create(t){if(!(t instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=t,this}getContext(t){let e=new bn(t,this.useContextVariables);return e.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(e),e.pushCode(`return ${Ze+this.alias}(0).result;`)):this.addRawCode(e),e}getCode(){let t="imports";return this.getContext(t).code}addRawCode(t){t.pushCode("var offset = 0;"),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("vars.$parent = null;"),t.pushCode("vars.$root = vars;"),this.generate(t),this.resolveReferences(t),t.pushCode("delete vars.$parent;"),t.pushCode("delete vars.$root;"),t.pushCode("return vars;")}addAliasedCode(t){return t.pushCode(`function ${Ze+this.alias}(offset, context) {`),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),t.pushCode("vars = Object.assign(vars, ctx);"),this.generate(t),t.markResolved(this.alias),this.resolveReferences(t),t.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),t.pushCode("return { offset: offset, result: vars };"),t.pushCode("}"),t}resolveReferences(t){let e=t.getUnresolvedReferences();t.markRequested(e),e.forEach(n=>{var i;(i=ue.get(n))===null||i===void 0||i.addAliasedCode(t)})}compile(){let t="imports",e=this.getContext(t);this.compiled=new Function(t,"TextDecoder",`return function (buffer, constructorFn) { ${e.code} };`)(e.imports,TextDecoder)}sizeOf(){let t=NaN;if(Object.keys(le).indexOf(this.type)>=0)t=le[this.type];else if(this.type==="string"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let e=NaN;typeof this.options.type=="string"?e=le[this.options.type]:this.options.type instanceof N&&(e=this.options.type.sizeOf()),t=this.options.length*e}else this.type==="seek"?t=this.options.length:this.type==="nest"?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t}parse(t){return this.compiled||this.compile(),this.compiled(t,this.constructorFn)}setNextParser(t,e,n){let i=new N;return i.type=t,i.varName=e,i.options=n,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(t){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,t);break;case"bit":this.generateBit(t);break;case"string":this.generateString(t);break;case"buffer":this.generateBuffer(t);break;case"seek":this.generateSeek(t);break;case"nest":this.generateNest(t);break;case"array":this.generateArray(t);break;case"choice":this.generateChoice(t);break;case"pointer":this.generatePointer(t);break;case"saveOffset":this.generateSaveOffset(t);break;case"wrapper":this.generateWrapper(t);break}this.type!=="bit"&&this.generateAssert(t)}let e=t.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(t,e,this.options.formatter),this.generateNext(t)}generateAssert(t){if(!this.options.assert)return;let e=t.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{let n=t.addImport(this.options.assert);t.pushCode(`if (!${n}.call(vars, ${e})) {`)}break;case"number":t.pushCode(`if (${this.options.assert} !== ${e}) {`);break;case"string":t.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${e}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}t.generateError(`"Assertion error: ${e} is " + ${JSON.stringify(this.options.assert.toString())}`),t.pushCode("}")}generateNext(t){return this.next&&(t=this.next.generate(t)),t}generateBit(t){let e=JSON.parse(JSON.stringify(this));if(e.options=this.options,e.generateAssert=this.generateAssert.bind(this),e.generateFormatter=this.generateFormatter.bind(this),e.varName=t.generateVariable(e.varName),t.bitFields.push(e),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){let n=t.generateTmpVariable();t.pushCode(`var ${n} = 0;`);let i=(f=0)=>{let c=0;for(let p=f;p<t.bitFields.length;p++){let h=t.bitFields[p].options.length;if(c+h>32)break;c+=h}return c},o=f=>(f<=8?(t.pushCode(`${n} = dataView.getUint8(offset);`),f=8):f<=16?(t.pushCode(`${n} = dataView.getUint16(offset);`),f=16):f<=24?(t.pushCode(`${n} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),f=24):(t.pushCode(`${n} = dataView.getUint32(offset);`),f=32),t.pushCode(`offset += ${f/8};`),f),a=0,s=this.endian==="be",l=0,u=0;t.bitFields.forEach((f,c)=>{let p=f.options.length;if(p>u){if(u){let _=-1>>>32-u;t.pushCode(`${f.varName} = (${n} & 0x${_.toString(16)}) << ${p-u};`),p-=u}a=0,u=l=o(i(c)-u)}let h=s?l-a-p:a,g=-1>>>32-p;t.pushCode(`${f.varName} ${p<f.options.length?"|=":"="} ${n} >> ${h} & 0x${g.toString(16)};`),f.options.length===32&&t.pushCode(`${f.varName} >>>= 0`),f.options.assert&&f.generateAssert(t),f.options.formatter&&f.generateFormatter(t,f.varName,f.options.formatter),a+=p,u-=p}),t.bitFields=[]}}generateSeek(t){let e=t.generateOption(this.options.length);t.pushCode(`offset += ${e};`)}generateString(t){let e=t.generateVariable(this.varName),n=t.generateTmpVariable(),i=this.options.encoding,o=i.toLowerCase()==="hex",a='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){let s=this.options.length;t.pushCode(`var ${n} = offset;`),t.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${n} < ${s});`);let l=`offset - ${n} < ${s} ? offset - 1 : offset`;t.pushCode(o?`${e} = Array.from(buffer.subarray(${n}, ${l}), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(${n}, ${l}));`)}else if(this.options.length){let s=t.generateOption(this.options.length);t.pushCode(o?`${e} = Array.from(buffer.subarray(offset, offset + ${s}), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${s}));`),t.pushCode(`offset += ${s};`)}else this.options.zeroTerminated?(t.pushCode(`var ${n} = offset;`),t.pushCode("while(dataView.getUint8(offset++) !== 0);"),t.pushCode(o?`${e} = Array.from(buffer.subarray(${n}, offset - 1), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(${n}, offset - 1));`)):this.options.greedy&&(t.pushCode(`var ${n} = offset;`),t.pushCode("while(buffer.length > offset++);"),t.pushCode(o?`${e} = Array.from(buffer.subarray(${n}, offset), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(${n}, offset));`));this.options.stripNull&&t.pushCode(`${e} = ${e}.replace(/\\x00+$/g, '')`)}generateBuffer(t){let e=t.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){let n=this.options.readUntil,i=t.generateTmpVariable(),o=t.generateTmpVariable();t.pushCode(`var ${i} = offset;`),t.pushCode(`var ${o} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${o} = dataView.getUint8(offset);`);let a=t.addImport(n);t.pushCode(`if (${a}.call(${t.generateVariable()}, ${o}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${e} = buffer.subarray(${i}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${e} = buffer.subarray(offset);`);else{let n=t.generateOption(this.options.length);t.pushCode(`${e} = buffer.subarray(offset, offset + ${n});`),t.pushCode(`offset += ${n};`)}this.options.clone&&t.pushCode(`${e} = buffer.constructor.from(${e});`)}generateArray(t){let e=t.generateOption(this.options.length),n=t.generateOption(this.options.lengthInBytes),i=this.options.type,o=t.generateTmpVariable(),a=t.generateVariable(this.varName),s=t.generateTmpVariable(),l=this.options.key,u=typeof l=="string";if(u?t.pushCode(`${a} = {};`):t.pushCode(`${a} = [];`),typeof this.options.readUntil=="function"?t.pushCode("do {"):this.options.readUntil==="eof"?t.pushCode(`for (var ${o} = 0; offset < buffer.length; ${o}++) {`):n!==void 0?t.pushCode(`for (var ${o} = offset + ${n}; offset < ${o}; ) {`):t.pushCode(`for (var ${o} = ${e}; ${o} > 0; ${o}--) {`),typeof i=="string")if(ue.get(i)){let f=t.generateTmpVariable();if(t.pushCode(`var ${f} = ${Ze+i}(offset, {`),t.useContextVariables){let c=t.generateVariable();t.pushCode(`$parent: ${c},`),t.pushCode(`$root: ${c}.$root,`),!this.options.readUntil&&n===void 0&&t.pushCode(`$index: ${e} - ${o},`)}t.pushCode("});"),t.pushCode(`var ${s} = ${f}.result; offset = ${f}.offset;`),i!==this.alias&&t.addReference(i)}else{let f=Sr[i],c=kr[i];t.pushCode(`var ${s} = dataView.get${f}(offset, ${c});`),t.pushCode(`offset += ${le[i]};`)}else if(i instanceof N){t.pushCode(`var ${s} = {};`);let f=t.generateVariable();t.pushScope(s),t.useContextVariables&&(t.pushCode(`${s}.$parent = ${f};`),t.pushCode(`${s}.$root = ${f}.$root;`),!this.options.readUntil&&n===void 0&&t.pushCode(`${s}.$index = ${e} - ${o};`)),i.generate(t),t.useContextVariables&&(t.pushCode(`delete ${s}.$parent;`),t.pushCode(`delete ${s}.$root;`),t.pushCode(`delete ${s}.$index;`)),t.popScope()}if(u?t.pushCode(`${a}[${s}.${l}] = ${s};`):t.pushCode(`${a}.push(${s});`),t.pushCode("}"),typeof this.options.readUntil=="function"){let f=this.options.readUntil,c=t.addImport(f);t.pushCode(`while (!${c}.call(${t.generateVariable()}, ${s}, buffer.subarray(offset)));`)}}generateChoiceCase(t,e,n){if(typeof n=="string"){let i=t.generateVariable(this.varName);if(ue.has(n)){let o=t.generateTmpVariable();t.pushCode(`var ${o} = ${Ze+n}(offset, {`),t.useContextVariables&&(t.pushCode(`$parent: ${i}.$parent,`),t.pushCode(`$root: ${i}.$root,`)),t.pushCode("});"),t.pushCode(`${i} = ${o}.result; offset = ${o}.offset;`),n!==this.alias&&t.addReference(n)}else{let o=Sr[n],a=kr[n];t.pushCode(`${i} = dataView.get${o}(offset, ${a});`),t.pushCode(`offset += ${le[n]}`)}}else n instanceof N&&(t.pushPath(e),n.generate(t),t.popPath(e))}generateChoice(t){let e=t.generateOption(this.options.tag),n=t.generateVariable(this.varName);if(this.varName&&(t.pushCode(`${n} = {};`),t.useContextVariables)){let i=t.generateVariable();t.pushCode(`${n}.$parent = ${i};`),t.pushCode(`${n}.$root = ${i}.$root;`)}t.pushCode(`switch(${e}) {`);for(let i in this.options.choices){let o=parseInt(i,10),a=this.options.choices[o];t.pushCode(`case ${o}:`),this.generateChoiceCase(t,this.varName,a),t.pushCode("break;")}t.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(t,this.varName,this.options.defaultChoice):t.generateError(`"Met undefined tag value " + ${e} + " at choice"`),t.pushCode("}"),this.varName&&t.useContextVariables&&(t.pushCode(`delete ${n}.$parent;`),t.pushCode(`delete ${n}.$root;`))}generateNest(t){let e=t.generateVariable(this.varName);if(this.options.type instanceof N){if(this.varName&&(t.pushCode(`${e} = {};`),t.useContextVariables)){let n=t.generateVariable();t.pushCode(`${e}.$parent = ${n};`),t.pushCode(`${e}.$root = ${n}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),this.varName&&t.useContextVariables&&t.useContextVariables&&(t.pushCode(`delete ${e}.$parent;`),t.pushCode(`delete ${e}.$root;`))}else if(ue.has(this.options.type)){let n=t.generateTmpVariable();if(t.pushCode(`var ${n} = ${Ze+this.options.type}(offset, {`),t.useContextVariables){let i=t.generateVariable();t.pushCode(`$parent: ${i},`),t.pushCode(`$root: ${i}.$root,`)}t.pushCode("});"),t.pushCode(`${e} = ${n}.result; offset = ${n}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}}generateWrapper(t){let e=t.generateVariable(this.varName),n=t.generateTmpVariable();if(typeof this.options.readUntil=="function"){let l=this.options.readUntil,u=t.generateTmpVariable(),f=t.generateTmpVariable();t.pushCode(`var ${u} = offset;`),t.pushCode(`var ${f} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${f} = dataView.getUint8(offset);`);let c=t.addImport(l);t.pushCode(`if (${c}.call(${t.generateVariable()}, ${f}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${n} = buffer.subarray(${u}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${n} = buffer.subarray(offset);`);else{let l=t.generateOption(this.options.length);t.pushCode(`${n} = buffer.subarray(offset, offset + ${l});`),t.pushCode(`offset += ${l};`)}this.options.clone&&t.pushCode(`${n} = buffer.constructor.from(${n});`);let i=t.generateTmpVariable(),o=t.generateTmpVariable(),a=t.generateTmpVariable(),s=t.addImport(this.options.wrapper);if(t.pushCode(`${n} = ${s}.call(this, ${n}).subarray(0);`),t.pushCode(`var ${i} = buffer;`),t.pushCode(`var ${o} = offset;`),t.pushCode(`var ${a} = dataView;`),t.pushCode(`buffer = ${n};`),t.pushCode("offset = 0;"),t.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof N)this.varName&&t.pushCode(`${e} = {};`),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(ue.has(this.options.type)){let l=t.generateTmpVariable();t.pushCode(`var ${l} = ${Ze+this.options.type}(0);`),t.pushCode(`${e} = ${l}.result;`),this.options.type!==this.alias&&t.addReference(this.options.type)}t.pushCode(`buffer = ${i};`),t.pushCode(`dataView = ${a};`),t.pushCode(`offset = ${o};`)}generateFormatter(t,e,n){if(typeof n=="function"){let i=t.addImport(n);t.pushCode(`${e} = ${i}.call(${t.generateVariable()}, ${e});`)}}generatePointer(t){let e=this.options.type,n=t.generateOption(this.options.offset),i=t.generateTmpVariable(),o=t.generateVariable(this.varName);if(t.pushCode(`var ${i} = offset;`),t.pushCode(`offset = ${n};`),this.options.type instanceof N){if(t.pushCode(`${o} = {};`),t.useContextVariables){let a=t.generateVariable();t.pushCode(`${o}.$parent = ${a};`),t.pushCode(`${o}.$root = ${a}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),t.useContextVariables&&(t.pushCode(`delete ${o}.$parent;`),t.pushCode(`delete ${o}.$root;`))}else if(ue.has(this.options.type)){let a=t.generateTmpVariable();if(t.pushCode(`var ${a} = ${Ze+this.options.type}(offset, {`),t.useContextVariables){let s=t.generateVariable();t.pushCode(`$parent: ${s},`),t.pushCode(`$root: ${s}.$root,`)}t.pushCode("});"),t.pushCode(`${o} = ${a}.result; offset = ${a}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}else if(Object.keys(le).indexOf(this.options.type)>=0){let a=Sr[e],s=kr[e];t.pushCode(`${o} = dataView.get${a}(offset, ${s});`),t.pushCode(`offset += ${le[e]};`)}t.pushCode(`offset = ${i};`)}generateSaveOffset(t){let e=t.generateVariable(this.varName);t.pushCode(`${e} = offset`)}};var Fs=xe(In()),Ns=xe(Fn());d();m();var ae=class{constructor(t,e){this.ranges=arguments.length===2?[{min:t,max:e}]:0 in t?Object.assign({},t):[t]}min(){return this.ranges[0].min}max(){return this.ranges[this.ranges.length-1].max}contains(t){for(let e=0;e<this.ranges.length;e+=1){let n=this.ranges[e];if(n.min<=t&&n.max>=t)return!0}return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(t=>new ae(t.min,t.max))}toString(){return this.ranges.map(t=>`[${t.min}-${t.max}]`).join(",")}union(t){let e=this.getRanges().concat(t.getRanges()).sort(this.rangeOrder),n=[],i=e[0];for(let o=1;o<e.length;o+=1){let a=e[o];a.min()>i.max()+1?(n.push(i),i=a):a.max()>i.max()&&(i=new ae(i.min(),a.max()))}return n.push(i),n.length===1?n[0]:new ae(n)}intersection(t){let e=this,n=t,i=this.ranges(),o=n.ranges(),a=i.length,s=o.length,l=0,u=0,f=[];for(;l<a&&u<s;){e=i[l],n=o[u];let c=Math.max(e.min(),n.min()),p=Math.min(e.max(),n.max());p>=c&&f.push(new ae(c,p)),e.max()>n.max()?u+=1:l+=1}if(f.length===0)throw new Error("found range of length 0");return f.length===1?f[0]:new ae(f)}coverage(){let t=0,e=this.ranges();for(let n=0;n<e.length;n+=1){let i=e[n];t+=i.max()-i.min()+1}return t}rangeOrder(t,e){let n=t,i=e;return arguments.length<2&&(i=n,n=this),n.min()<i.min()?-1:n.min()>i.min()?1:n.max()<i.max()?-1:i.max()>n.max()?1:0}};d();m();d();m();function dt(r){let t=r.length;for(;--t>=0;)r[t]=0}var Ul=0,qa=1,Bl=2,Ol=3,Pl=258,ri=29,Wt=256,zt=Wt+1+ri,ht=30,ni=19,Ga=2*zt+1,Ye=15,Nn=16,Dl=7,ii=256,Ka=16,Xa=17,Ja=18,Wn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Pr=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),zl=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Qa=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ll=512,Ae=new Array((zt+2)*2);dt(Ae);var Ot=new Array(ht*2);dt(Ot);var Lt=new Array(Ll);dt(Lt);var Mt=new Array(Pl-Ol+1);dt(Mt);var oi=new Array(ri);dt(oi);var Dr=new Array(ht);dt(Dr);function Un(r,t,e,n,i){this.static_tree=r,this.extra_bits=t,this.extra_base=e,this.elems=n,this.max_length=i,this.has_stree=r&&r.length}var es,ts,rs;function Bn(r,t){this.dyn_tree=r,this.max_code=0,this.stat_desc=t}var ns=r=>r<256?Lt[r]:Lt[256+(r>>>7)],Vt=(r,t)=>{r.pending_buf[r.pending++]=t&255,r.pending_buf[r.pending++]=t>>>8&255},K=(r,t,e)=>{r.bi_valid>Nn-e?(r.bi_buf|=t<<r.bi_valid&65535,Vt(r,r.bi_buf),r.bi_buf=t>>Nn-r.bi_valid,r.bi_valid+=e-Nn):(r.bi_buf|=t<<r.bi_valid&65535,r.bi_valid+=e)},ge=(r,t,e)=>{K(r,e[t*2],e[t*2+1])},is=(r,t)=>{let e=0;do e|=r&1,r>>>=1,e<<=1;while(--t>0);return e>>>1},Ml=r=>{r.bi_valid===16?(Vt(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},Vl=(r,t)=>{let e=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length,u,f,c,p,h,g,_=0;for(p=0;p<=Ye;p++)r.bl_count[p]=0;for(e[r.heap[r.heap_max]*2+1]=0,u=r.heap_max+1;u<Ga;u++)f=r.heap[u],p=e[e[f*2+1]*2+1]+1,p>l&&(p=l,_++),e[f*2+1]=p,!(f>n)&&(r.bl_count[p]++,h=0,f>=s&&(h=a[f-s]),g=e[f*2],r.opt_len+=g*(p+h),o&&(r.static_len+=g*(i[f*2+1]+h)));if(_!==0){do{for(p=l-1;r.bl_count[p]===0;)p--;r.bl_count[p]--,r.bl_count[p+1]+=2,r.bl_count[l]--,_-=2}while(_>0);for(p=l;p!==0;p--)for(f=r.bl_count[p];f!==0;)c=r.heap[--u],!(c>n)&&(e[c*2+1]!==p&&(r.opt_len+=(p-e[c*2+1])*e[c*2],e[c*2+1]=p),f--)}},os=(r,t,e)=>{let n=new Array(Ye+1),i=0,o,a;for(o=1;o<=Ye;o++)i=i+e[o-1]<<1,n[o]=i;for(a=0;a<=t;a++){let s=r[a*2+1];s!==0&&(r[a*2]=is(n[s]++,s))}},Zl=()=>{let r,t,e,n,i,o=new Array(Ye+1);for(e=0,n=0;n<ri-1;n++)for(oi[n]=e,r=0;r<1<<Wn[n];r++)Mt[e++]=n;for(Mt[e-1]=n,i=0,n=0;n<16;n++)for(Dr[n]=i,r=0;r<1<<Pr[n];r++)Lt[i++]=n;for(i>>=7;n<ht;n++)for(Dr[n]=i<<7,r=0;r<1<<Pr[n]-7;r++)Lt[256+i++]=n;for(t=0;t<=Ye;t++)o[t]=0;for(r=0;r<=143;)Ae[r*2+1]=8,r++,o[8]++;for(;r<=255;)Ae[r*2+1]=9,r++,o[9]++;for(;r<=279;)Ae[r*2+1]=7,r++,o[7]++;for(;r<=287;)Ae[r*2+1]=8,r++,o[8]++;for(os(Ae,zt+1,o),r=0;r<ht;r++)Ot[r*2+1]=5,Ot[r*2]=is(r,5);es=new Un(Ae,Wn,Wt+1,zt,Ye),ts=new Un(Ot,Pr,0,ht,Ye),rs=new Un(new Array(0),zl,0,ni,Dl)},as=r=>{let t;for(t=0;t<zt;t++)r.dyn_ltree[t*2]=0;for(t=0;t<ht;t++)r.dyn_dtree[t*2]=0;for(t=0;t<ni;t++)r.bl_tree[t*2]=0;r.dyn_ltree[ii*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},ss=r=>{r.bi_valid>8?Vt(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},la=(r,t,e,n)=>{let i=t*2,o=e*2;return r[i]<r[o]||r[i]===r[o]&&n[t]<=n[e]},On=(r,t,e)=>{let n=r.heap[e],i=e<<1;for(;i<=r.heap_len&&(i<r.heap_len&&la(t,r.heap[i+1],r.heap[i],r.depth)&&i++,!la(t,n,r.heap[i],r.depth));)r.heap[e]=r.heap[i],e=i,i<<=1;r.heap[e]=n},ha=(r,t,e)=>{let n,i,o=0,a,s;if(r.sym_next!==0)do n=r.pending_buf[r.sym_buf+o++]&255,n+=(r.pending_buf[r.sym_buf+o++]&255)<<8,i=r.pending_buf[r.sym_buf+o++],n===0?ge(r,i,t):(a=Mt[i],ge(r,a+Wt+1,t),s=Wn[a],s!==0&&(i-=oi[a],K(r,i,s)),n--,a=ns(n),ge(r,a,e),s=Pr[a],s!==0&&(n-=Dr[a],K(r,n,s)));while(o<r.sym_next);ge(r,ii,t)},qn=(r,t)=>{let e=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,l=-1,u;for(r.heap_len=0,r.heap_max=Ga,a=0;a<o;a++)e[a*2]!==0?(r.heap[++r.heap_len]=l=a,r.depth[a]=0):e[a*2+1]=0;for(;r.heap_len<2;)u=r.heap[++r.heap_len]=l<2?++l:0,e[u*2]=1,r.depth[u]=0,r.opt_len--,i&&(r.static_len-=n[u*2+1]);for(t.max_code=l,a=r.heap_len>>1;a>=1;a--)On(r,e,a);u=o;do a=r.heap[1],r.heap[1]=r.heap[r.heap_len--],On(r,e,1),s=r.heap[1],r.heap[--r.heap_max]=a,r.heap[--r.heap_max]=s,e[u*2]=e[a*2]+e[s*2],r.depth[u]=(r.depth[a]>=r.depth[s]?r.depth[a]:r.depth[s])+1,e[a*2+1]=e[s*2+1]=u,r.heap[1]=u++,On(r,e,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],Vl(r,t),os(e,l,r.bl_count)},ca=(r,t,e)=>{let n,i=-1,o,a=t[0*2+1],s=0,l=7,u=4;for(a===0&&(l=138,u=3),t[(e+1)*2+1]=65535,n=0;n<=e;n++)o=a,a=t[(n+1)*2+1],!(++s<l&&o===a)&&(s<u?r.bl_tree[o*2]+=s:o!==0?(o!==i&&r.bl_tree[o*2]++,r.bl_tree[Ka*2]++):s<=10?r.bl_tree[Xa*2]++:r.bl_tree[Ja*2]++,s=0,i=o,a===0?(l=138,u=3):o===a?(l=6,u=3):(l=7,u=4))},pa=(r,t,e)=>{let n,i=-1,o,a=t[0*2+1],s=0,l=7,u=4;for(a===0&&(l=138,u=3),n=0;n<=e;n++)if(o=a,a=t[(n+1)*2+1],!(++s<l&&o===a)){if(s<u)do ge(r,o,r.bl_tree);while(--s!==0);else o!==0?(o!==i&&(ge(r,o,r.bl_tree),s--),ge(r,Ka,r.bl_tree),K(r,s-3,2)):s<=10?(ge(r,Xa,r.bl_tree),K(r,s-3,3)):(ge(r,Ja,r.bl_tree),K(r,s-11,7));s=0,i=o,a===0?(l=138,u=3):o===a?(l=6,u=3):(l=7,u=4)}},Yl=r=>{let t;for(ca(r,r.dyn_ltree,r.l_desc.max_code),ca(r,r.dyn_dtree,r.d_desc.max_code),qn(r,r.bl_desc),t=ni-1;t>=3&&r.bl_tree[Qa[t]*2+1]===0;t--);return r.opt_len+=3*(t+1)+5+5+4,t},Hl=(r,t,e,n)=>{let i;for(K(r,t-257,5),K(r,e-1,5),K(r,n-4,4),i=0;i<n;i++)K(r,r.bl_tree[Qa[i]*2+1],3);pa(r,r.dyn_ltree,t-1),pa(r,r.dyn_dtree,e-1)},jl=r=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&r.dyn_ltree[e*2]!==0)return 0;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return 1;for(e=32;e<Wt;e++)if(r.dyn_ltree[e*2]!==0)return 1;return 0},da=!1,Wl=r=>{da||(Zl(),da=!0),r.l_desc=new Bn(r.dyn_ltree,es),r.d_desc=new Bn(r.dyn_dtree,ts),r.bl_desc=new Bn(r.bl_tree,rs),r.bi_buf=0,r.bi_valid=0,as(r)},fs=(r,t,e,n)=>{K(r,(Ul<<1)+(n?1:0),3),ss(r),Vt(r,e),Vt(r,~e),e&&r.pending_buf.set(r.window.subarray(t,t+e),r.pending),r.pending+=e},ql=r=>{K(r,qa<<1,3),ge(r,ii,Ae),Ml(r)},Gl=(r,t,e,n)=>{let i,o,a=0;r.level>0?(r.strm.data_type===2&&(r.strm.data_type=jl(r)),qn(r,r.l_desc),qn(r,r.d_desc),a=Yl(r),i=r.opt_len+3+7>>>3,o=r.static_len+3+7>>>3,o<=i&&(i=o)):i=o=e+5,e+4<=i&&t!==-1?fs(r,t,e,n):r.strategy===4||o===i?(K(r,(qa<<1)+(n?1:0),3),ha(r,Ae,Ot)):(K(r,(Bl<<1)+(n?1:0),3),Hl(r,r.l_desc.max_code+1,r.d_desc.max_code+1,a+1),ha(r,r.dyn_ltree,r.dyn_dtree)),as(r),n&&ss(r)},Kl=(r,t,e)=>(r.pending_buf[r.sym_buf+r.sym_next++]=t,r.pending_buf[r.sym_buf+r.sym_next++]=t>>8,r.pending_buf[r.sym_buf+r.sym_next++]=e,t===0?r.dyn_ltree[e*2]++:(r.matches++,t--,r.dyn_ltree[(Mt[e]+Wt+1)*2]++,r.dyn_dtree[ns(t)*2]++),r.sym_next===r.sym_end),Xl=Wl,Jl=fs,Ql=Gl,eh=Kl,th=ql,rh={_tr_init:Xl,_tr_stored_block:Jl,_tr_flush_block:Ql,_tr_tally:eh,_tr_align:th},nh=(r,t,e,n)=>{let i=r&65535|0,o=r>>>16&65535|0,a=0;for(;e!==0;){a=e>2e3?2e3:e,e-=a;do i=i+t[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0},Zt=nh,ih=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},oh=new Uint32Array(ih()),ah=(r,t,e,n)=>{let i=oh,o=n+e;r^=-1;for(let a=n;a<o;a++)r=r>>>8^i[(r^t[a])&255];return r^-1},L=ah,We={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},mt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:sh,_tr_stored_block:Gn,_tr_flush_block:fh,_tr_tally:Ue,_tr_align:uh}=rh,{Z_NO_FLUSH:Be,Z_PARTIAL_FLUSH:lh,Z_FULL_FLUSH:hh,Z_FINISH:se,Z_BLOCK:ma,Z_OK:V,Z_STREAM_END:wa,Z_STREAM_ERROR:_e,Z_DATA_ERROR:ch,Z_BUF_ERROR:Pn,Z_DEFAULT_COMPRESSION:ph,Z_FILTERED:dh,Z_HUFFMAN_ONLY:Fr,Z_RLE:mh,Z_FIXED:wh,Z_DEFAULT_STRATEGY:gh,Z_UNKNOWN:_h,Z_DEFLATED:Mr}=mt,bh=9,xh=15,yh=8,vh=29,Eh=256,Kn=Eh+1+vh,Th=30,Ah=19,Ch=2*Kn+1,Rh=15,U=3,Ne=258,be=Ne+U+1,Sh=32,ct=42,ai=57,Xn=69,Jn=73,Qn=91,ei=103,He=113,Ut=666,W=1,wt=2,qe=3,gt=4,kh=3,je=(r,t)=>(r.msg=We[t],t),ga=r=>r*2-(r>4?9:0),Fe=r=>{let t=r.length;for(;--t>=0;)r[t]=0},Ih=r=>{let t,e,n,i=r.w_size;t=r.hash_size,n=t;do e=r.head[--n],r.head[n]=e>=i?e-i:0;while(--t);t=i,n=t;do e=r.prev[--n],r.prev[n]=e>=i?e-i:0;while(--t)},$h=(r,t,e)=>(t<<r.hash_shift^e)&r.hash_mask,Oe=$h,ee=r=>{let t=r.state,e=t.pending;e>r.avail_out&&(e=r.avail_out),e!==0&&(r.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),r.next_out),r.next_out+=e,t.pending_out+=e,r.total_out+=e,r.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},te=(r,t)=>{fh(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,t),r.block_start=r.strstart,ee(r.strm)},B=(r,t)=>{r.pending_buf[r.pending++]=t},Nt=(r,t)=>{r.pending_buf[r.pending++]=t>>>8&255,r.pending_buf[r.pending++]=t&255},ti=(r,t,e,n)=>{let i=r.avail_in;return i>n&&(i=n),i===0?0:(r.avail_in-=i,t.set(r.input.subarray(r.next_in,r.next_in+i),e),r.state.wrap===1?r.adler=Zt(r.adler,t,i,e):r.state.wrap===2&&(r.adler=L(r.adler,t,i,e)),r.next_in+=i,r.total_in+=i,i)},us=(r,t)=>{let e=r.max_chain_length,n=r.strstart,i,o,a=r.prev_length,s=r.nice_match,l=r.strstart>r.w_size-be?r.strstart-(r.w_size-be):0,u=r.window,f=r.w_mask,c=r.prev,p=r.strstart+Ne,h=u[n+a-1],g=u[n+a];r.prev_length>=r.good_match&&(e>>=2),s>r.lookahead&&(s=r.lookahead);do if(i=t,!(u[i+a]!==g||u[i+a-1]!==h||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<p);if(o=Ne-(p-n),n=p-Ne,o>a){if(r.match_start=t,a=o,o>=s)break;h=u[n+a-1],g=u[n+a]}}while((t=c[t&f])>l&&--e!==0);return a<=r.lookahead?a:r.lookahead},pt=r=>{let t=r.w_size,e,n,i;do{if(n=r.window_size-r.lookahead-r.strstart,r.strstart>=t+(t-be)&&(r.window.set(r.window.subarray(t,t+t-n),0),r.match_start-=t,r.strstart-=t,r.block_start-=t,r.insert>r.strstart&&(r.insert=r.strstart),Ih(r),n+=t),r.strm.avail_in===0)break;if(e=ti(r.strm,r.window,r.strstart+r.lookahead,n),r.lookahead+=e,r.lookahead+r.insert>=U)for(i=r.strstart-r.insert,r.ins_h=r.window[i],r.ins_h=Oe(r,r.ins_h,r.window[i+1]);r.insert&&(r.ins_h=Oe(r,r.ins_h,r.window[i+U-1]),r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,r.insert--,!(r.lookahead+r.insert<U)););}while(r.lookahead<be&&r.strm.avail_in!==0)},ls=(r,t)=>{let e=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,n,i,o,a=0,s=r.strm.avail_in;do{if(n=65535,o=r.bi_valid+42>>3,r.strm.avail_out<o||(o=r.strm.avail_out-o,i=r.strstart-r.block_start,n>i+r.strm.avail_in&&(n=i+r.strm.avail_in),n>o&&(n=o),n<e&&(n===0&&t!==se||t===Be||n!==i+r.strm.avail_in)))break;a=t===se&&n===i+r.strm.avail_in?1:0,Gn(r,0,0,a),r.pending_buf[r.pending-4]=n,r.pending_buf[r.pending-3]=n>>8,r.pending_buf[r.pending-2]=~n,r.pending_buf[r.pending-1]=~n>>8,ee(r.strm),i&&(i>n&&(i=n),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+i),r.strm.next_out),r.strm.next_out+=i,r.strm.avail_out-=i,r.strm.total_out+=i,r.block_start+=i,n-=i),n&&(ti(r.strm,r.strm.output,r.strm.next_out,n),r.strm.next_out+=n,r.strm.avail_out-=n,r.strm.total_out+=n)}while(a===0);return s-=r.strm.avail_in,s&&(s>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=s&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-s,r.strm.next_in),r.strstart),r.strstart+=s,r.insert+=s>r.w_size-r.insert?r.w_size-r.insert:s),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),a?gt:t!==Be&&t!==se&&r.strm.avail_in===0&&r.strstart===r.block_start?wt:(o=r.window_size-r.strstart,r.strm.avail_in>o&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,o+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),o>r.strm.avail_in&&(o=r.strm.avail_in),o&&(ti(r.strm,r.window,r.strstart,o),r.strstart+=o,r.insert+=o>r.w_size-r.insert?r.w_size-r.insert:o),r.high_water<r.strstart&&(r.high_water=r.strstart),o=r.bi_valid+42>>3,o=r.pending_buf_size-o>65535?65535:r.pending_buf_size-o,e=o>r.w_size?r.w_size:o,i=r.strstart-r.block_start,(i>=e||(i||t===se)&&t!==Be&&r.strm.avail_in===0&&i<=o)&&(n=i>o?o:i,a=t===se&&r.strm.avail_in===0&&n===i?1:0,Gn(r,r.block_start,n,a),r.block_start+=n,ee(r.strm)),a?qe:W)},Dn=(r,t)=>{let e,n;for(;;){if(r.lookahead<be){if(pt(r),r.lookahead<be&&t===Be)return W;if(r.lookahead===0)break}if(e=0,r.lookahead>=U&&(r.ins_h=Oe(r,r.ins_h,r.window[r.strstart+U-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),e!==0&&r.strstart-e<=r.w_size-be&&(r.match_length=us(r,e)),r.match_length>=U)if(n=Ue(r,r.strstart-r.match_start,r.match_length-U),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=U){r.match_length--;do r.strstart++,r.ins_h=Oe(r,r.ins_h,r.window[r.strstart+U-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=Oe(r,r.ins_h,r.window[r.strstart+1]);else n=Ue(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(te(r,!1),r.strm.avail_out===0))return W}return r.insert=r.strstart<U-1?r.strstart:U-1,t===se?(te(r,!0),r.strm.avail_out===0?qe:gt):r.sym_next&&(te(r,!1),r.strm.avail_out===0)?W:wt},ut=(r,t)=>{let e,n,i;for(;;){if(r.lookahead<be){if(pt(r),r.lookahead<be&&t===Be)return W;if(r.lookahead===0)break}if(e=0,r.lookahead>=U&&(r.ins_h=Oe(r,r.ins_h,r.window[r.strstart+U-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=U-1,e!==0&&r.prev_length<r.max_lazy_match&&r.strstart-e<=r.w_size-be&&(r.match_length=us(r,e),r.match_length<=5&&(r.strategy===dh||r.match_length===U&&r.strstart-r.match_start>4096)&&(r.match_length=U-1)),r.prev_length>=U&&r.match_length<=r.prev_length){i=r.strstart+r.lookahead-U,n=Ue(r,r.strstart-1-r.prev_match,r.prev_length-U),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=i&&(r.ins_h=Oe(r,r.ins_h,r.window[r.strstart+U-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=U-1,r.strstart++,n&&(te(r,!1),r.strm.avail_out===0))return W}else if(r.match_available){if(n=Ue(r,0,r.window[r.strstart-1]),n&&te(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return W}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=Ue(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<U-1?r.strstart:U-1,t===se?(te(r,!0),r.strm.avail_out===0?qe:gt):r.sym_next&&(te(r,!1),r.strm.avail_out===0)?W:wt},Fh=(r,t)=>{let e,n,i,o,a=r.window;for(;;){if(r.lookahead<=Ne){if(pt(r),r.lookahead<=Ne&&t===Be)return W;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=U&&r.strstart>0&&(i=r.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=r.strstart+Ne;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);r.match_length=Ne-(o-i),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=U?(e=Ue(r,1,r.match_length-U),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(e=Ue(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),e&&(te(r,!1),r.strm.avail_out===0))return W}return r.insert=0,t===se?(te(r,!0),r.strm.avail_out===0?qe:gt):r.sym_next&&(te(r,!1),r.strm.avail_out===0)?W:wt},Nh=(r,t)=>{let e;for(;;){if(r.lookahead===0&&(pt(r),r.lookahead===0)){if(t===Be)return W;break}if(r.match_length=0,e=Ue(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,e&&(te(r,!1),r.strm.avail_out===0))return W}return r.insert=0,t===se?(te(r,!0),r.strm.avail_out===0?qe:gt):r.sym_next&&(te(r,!1),r.strm.avail_out===0)?W:wt};function we(r,t,e,n,i){this.good_length=r,this.max_lazy=t,this.nice_length=e,this.max_chain=n,this.func=i}var Bt=[new we(0,0,0,0,ls),new we(4,4,8,4,Dn),new we(4,5,16,8,Dn),new we(4,6,32,32,Dn),new we(4,4,16,16,ut),new we(8,16,32,32,ut),new we(8,16,128,128,ut),new we(8,32,128,256,ut),new we(32,128,258,1024,ut),new we(32,258,258,4096,ut)],Uh=r=>{r.window_size=2*r.w_size,Fe(r.head),r.max_lazy_match=Bt[r.level].max_lazy,r.good_match=Bt[r.level].good_length,r.nice_match=Bt[r.level].nice_length,r.max_chain_length=Bt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=U-1,r.match_available=0,r.ins_h=0};function Bh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Mr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ch*2),this.dyn_dtree=new Uint16Array((2*Th+1)*2),this.bl_tree=new Uint16Array((2*Ah+1)*2),Fe(this.dyn_ltree),Fe(this.dyn_dtree),Fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Rh+1),this.heap=new Uint16Array(2*Kn+1),Fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Kn+1),Fe(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var qt=r=>{if(!r)return 1;let t=r.state;return!t||t.strm!==r||t.status!==ct&&t.status!==ai&&t.status!==Xn&&t.status!==Jn&&t.status!==Qn&&t.status!==ei&&t.status!==He&&t.status!==Ut?1:0},hs=r=>{if(qt(r))return je(r,_e);r.total_in=r.total_out=0,r.data_type=_h;let t=r.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?ai:t.wrap?ct:He,r.adler=t.wrap===2?0:1,t.last_flush=-2,sh(t),V},cs=r=>{let t=hs(r);return t===V&&Uh(r.state),t},Oh=(r,t)=>qt(r)||r.state.wrap!==2?_e:(r.state.gzhead=t,V),ps=(r,t,e,n,i,o)=>{if(!r)return _e;let a=1;if(t===ph&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>bh||e!==Mr||n<8||n>15||t<0||t>9||o<0||o>wh||n===8&&a!==1)return je(r,_e);n===8&&(n=9);let s=new Bh;return r.state=s,s.strm=r,s.status=ct,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+U-1)/U),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=o,s.method=e,cs(r)},Ph=(r,t)=>ps(r,t,Mr,xh,yh,gh),Dh=(r,t)=>{if(qt(r)||t>ma||t<0)return r?je(r,_e):_e;let e=r.state;if(!r.output||r.avail_in!==0&&!r.input||e.status===Ut&&t!==se)return je(r,r.avail_out===0?Pn:_e);let n=e.last_flush;if(e.last_flush=t,e.pending!==0){if(ee(r),r.avail_out===0)return e.last_flush=-1,V}else if(r.avail_in===0&&ga(t)<=ga(n)&&t!==se)return je(r,Pn);if(e.status===Ut&&r.avail_in!==0)return je(r,Pn);if(e.status===ct&&e.wrap===0&&(e.status=He),e.status===ct){let i=Mr+(e.w_bits-8<<4)<<8,o=-1;if(e.strategy>=Fr||e.level<2?o=0:e.level<6?o=1:e.level===6?o=2:o=3,i|=o<<6,e.strstart!==0&&(i|=Sh),i+=31-i%31,Nt(e,i),e.strstart!==0&&(Nt(e,r.adler>>>16),Nt(e,r.adler&65535)),r.adler=1,e.status=He,ee(r),e.pending!==0)return e.last_flush=-1,V}if(e.status===ai){if(r.adler=0,B(e,31),B(e,139),B(e,8),e.gzhead)B(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),B(e,e.gzhead.time&255),B(e,e.gzhead.time>>8&255),B(e,e.gzhead.time>>16&255),B(e,e.gzhead.time>>24&255),B(e,e.level===9?2:e.strategy>=Fr||e.level<2?4:0),B(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(B(e,e.gzhead.extra.length&255),B(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(r.adler=L(r.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=Xn;else if(B(e,0),B(e,0),B(e,0),B(e,0),B(e,0),B(e,e.level===9?2:e.strategy>=Fr||e.level<2?4:0),B(e,kh),e.status=He,ee(r),e.pending!==0)return e.last_flush=-1,V}if(e.status===Xn){if(e.gzhead.extra){let i=e.pending,o=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+o>e.pending_buf_size;){let s=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),e.gzindex+=s,ee(r),e.pending!==0)return e.last_flush=-1,V;i=0,o-=s}let a=new Uint8Array(e.gzhead.extra);e.pending_buf.set(a.subarray(e.gzindex,e.gzindex+o),e.pending),e.pending+=o,e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Jn}if(e.status===Jn){if(e.gzhead.name){let i=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),ee(r),e.pending!==0)return e.last_flush=-1,V;i=0}e.gzindex<e.gzhead.name.length?o=e.gzhead.name.charCodeAt(e.gzindex++)&255:o=0,B(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Qn}if(e.status===Qn){if(e.gzhead.comment){let i=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i)),ee(r),e.pending!==0)return e.last_flush=-1,V;i=0}e.gzindex<e.gzhead.comment.length?o=e.gzhead.comment.charCodeAt(e.gzindex++)&255:o=0,B(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>i&&(r.adler=L(r.adler,e.pending_buf,e.pending-i,i))}e.status=ei}if(e.status===ei){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(ee(r),e.pending!==0))return e.last_flush=-1,V;B(e,r.adler&255),B(e,r.adler>>8&255),r.adler=0}if(e.status=He,ee(r),e.pending!==0)return e.last_flush=-1,V}if(r.avail_in!==0||e.lookahead!==0||t!==Be&&e.status!==Ut){let i=e.level===0?ls(e,t):e.strategy===Fr?Nh(e,t):e.strategy===mh?Fh(e,t):Bt[e.level].func(e,t);if((i===qe||i===gt)&&(e.status=Ut),i===W||i===qe)return r.avail_out===0&&(e.last_flush=-1),V;if(i===wt&&(t===lh?uh(e):t!==ma&&(Gn(e,0,0,!1),t===hh&&(Fe(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),ee(r),r.avail_out===0))return e.last_flush=-1,V}return t!==se?V:e.wrap<=0?wa:(e.wrap===2?(B(e,r.adler&255),B(e,r.adler>>8&255),B(e,r.adler>>16&255),B(e,r.adler>>24&255),B(e,r.total_in&255),B(e,r.total_in>>8&255),B(e,r.total_in>>16&255),B(e,r.total_in>>24&255)):(Nt(e,r.adler>>>16),Nt(e,r.adler&65535)),ee(r),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?V:wa)},zh=r=>{if(qt(r))return _e;let t=r.state.status;return r.state=null,t===He?je(r,ch):V},Lh=(r,t)=>{let e=t.length;if(qt(r))return _e;let n=r.state,i=n.wrap;if(i===2||i===1&&n.status!==ct||n.lookahead)return _e;if(i===1&&(r.adler=Zt(r.adler,t,e,0)),n.wrap=0,e>=n.w_size){i===0&&(Fe(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(t.subarray(e-n.w_size,e),0),t=l,e=n.w_size}let o=r.avail_in,a=r.next_in,s=r.input;for(r.avail_in=e,r.next_in=0,r.input=t,pt(n);n.lookahead>=U;){let l=n.strstart,u=n.lookahead-(U-1);do n.ins_h=Oe(n,n.ins_h,n.window[l+U-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--u);n.strstart=l,n.lookahead=U-1,pt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=U-1,n.match_available=0,r.next_in=a,r.input=s,r.avail_in=o,n.wrap=i,V},Mh=Ph,Vh=ps,Zh=cs,Yh=hs,Hh=Oh,jh=Dh,Wh=zh,qh=Lh,Gh="pako deflate (from Nodeca project)",Pt={deflateInit:Mh,deflateInit2:Vh,deflateReset:Zh,deflateResetKeep:Yh,deflateSetHeader:Hh,deflate:jh,deflateEnd:Wh,deflateSetDictionary:qh,deflateInfo:Gh},Kh=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),Xh=function(r){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let e=t.shift();if(!!e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(let n in e)Kh(e,n)&&(r[n]=e[n])}}return r},Jh=r=>{let t=0;for(let n=0,i=r.length;n<i;n++)t+=r[n].length;let e=new Uint8Array(t);for(let n=0,i=0,o=r.length;n<o;n++){let a=r[n];e.set(a,i),i+=a.length}return e},Vr={assign:Xh,flattenChunks:Jh},ds=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){ds=!1}var Yt=new Uint8Array(256);for(let r=0;r<256;r++)Yt[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Yt[254]=Yt[254]=1;var Qh=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,i,o,a=r.length,s=0;for(i=0;i<a;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),e<128?t[o++]=e:e<2048?(t[o++]=192|e>>>6,t[o++]=128|e&63):e<65536?(t[o++]=224|e>>>12,t[o++]=128|e>>>6&63,t[o++]=128|e&63):(t[o++]=240|e>>>18,t[o++]=128|e>>>12&63,t[o++]=128|e>>>6&63,t[o++]=128|e&63);return t},ec=(r,t)=>{if(t<65534&&r.subarray&&ds)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e},tc=(r,t)=>{let e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,i,o=new Array(e*2);for(i=0,n=0;n<e;){let a=r[n++];if(a<128){o[i++]=a;continue}let s=Yt[a];if(s>4){o[i++]=65533,n+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&n<e;)a=a<<6|r[n++]&63,s--;if(s>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return ec(o,i)},rc=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+Yt[r[e]]>t?e:t},Ht={string2buf:Qh,buf2string:tc,utf8border:rc};function nc(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ms=nc,ws=Object.prototype.toString,{Z_NO_FLUSH:ic,Z_SYNC_FLUSH:oc,Z_FULL_FLUSH:ac,Z_FINISH:sc,Z_OK:zr,Z_STREAM_END:fc,Z_DEFAULT_COMPRESSION:uc,Z_DEFAULT_STRATEGY:lc,Z_DEFLATED:hc}=mt;function Gt(r){this.options=Vr.assign({level:uc,method:hc,chunkSize:16384,windowBits:15,memLevel:8,strategy:lc},r||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ms,this.strm.avail_out=0;let e=Pt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==zr)throw new Error(We[e]);if(t.header&&Pt.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=Ht.string2buf(t.dictionary):ws.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,e=Pt.deflateSetDictionary(this.strm,n),e!==zr)throw new Error(We[e]);this._dict_set=!0}}Gt.prototype.push=function(r,t){let e=this.strm,n=this.options.chunkSize,i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?sc:ic,typeof r=="string"?e.input=Ht.string2buf(r):ws.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),(o===oc||o===ac)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(i=Pt.deflate(e,o),i===fc)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Pt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===zr;if(e.avail_out===0){this.onData(e.output);continue}if(o>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};Gt.prototype.onData=function(r){this.chunks.push(r)};Gt.prototype.onEnd=function(r){r===zr&&(this.result=Vr.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function si(r,t){let e=new Gt(t);if(e.push(r,!0),e.err)throw e.msg||We[e.err];return e.result}function cc(r,t){return t=t||{},t.raw=!0,si(r,t)}function pc(r,t){return t=t||{},t.gzip=!0,si(r,t)}var dc=Gt,mc=si,wc=cc,gc=pc,_c=mt,bc={Deflate:dc,deflate:mc,deflateRaw:wc,gzip:gc,constants:_c},Nr=16209,xc=16191,yc=function(t,e){let n,i,o,a,s,l,u,f,c,p,h,g,_,T,A,S,E,x,R,$,v,C,I,k,F=t.state;n=t.next_in,I=t.input,i=n+(t.avail_in-5),o=t.next_out,k=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=F.dmax,u=F.wsize,f=F.whave,c=F.wnext,p=F.window,h=F.hold,g=F.bits,_=F.lencode,T=F.distcode,A=(1<<F.lenbits)-1,S=(1<<F.distbits)-1;e:do{g<15&&(h+=I[n++]<<g,g+=8,h+=I[n++]<<g,g+=8),E=_[h&A];t:for(;;){if(x=E>>>24,h>>>=x,g-=x,x=E>>>16&255,x===0)k[o++]=E&65535;else if(x&16){R=E&65535,x&=15,x&&(g<x&&(h+=I[n++]<<g,g+=8),R+=h&(1<<x)-1,h>>>=x,g-=x),g<15&&(h+=I[n++]<<g,g+=8,h+=I[n++]<<g,g+=8),E=T[h&S];r:for(;;){if(x=E>>>24,h>>>=x,g-=x,x=E>>>16&255,x&16){if($=E&65535,x&=15,g<x&&(h+=I[n++]<<g,g+=8,g<x&&(h+=I[n++]<<g,g+=8)),$+=h&(1<<x)-1,$>l){t.msg="invalid distance too far back",F.mode=Nr;break e}if(h>>>=x,g-=x,x=o-a,$>x){if(x=$-x,x>f&&F.sane){t.msg="invalid distance too far back",F.mode=Nr;break e}if(v=0,C=p,c===0){if(v+=u-x,x<R){R-=x;do k[o++]=p[v++];while(--x);v=o-$,C=k}}else if(c<x){if(v+=u+c-x,x-=c,x<R){R-=x;do k[o++]=p[v++];while(--x);if(v=0,c<R){x=c,R-=x;do k[o++]=p[v++];while(--x);v=o-$,C=k}}}else if(v+=c-x,x<R){R-=x;do k[o++]=p[v++];while(--x);v=o-$,C=k}for(;R>2;)k[o++]=C[v++],k[o++]=C[v++],k[o++]=C[v++],R-=3;R&&(k[o++]=C[v++],R>1&&(k[o++]=C[v++]))}else{v=o-$;do k[o++]=k[v++],k[o++]=k[v++],k[o++]=k[v++],R-=3;while(R>2);R&&(k[o++]=k[v++],R>1&&(k[o++]=k[v++]))}}else if((x&64)===0){E=T[(E&65535)+(h&(1<<x)-1)];continue r}else{t.msg="invalid distance code",F.mode=Nr;break e}break}}else if((x&64)===0){E=_[(E&65535)+(h&(1<<x)-1)];continue t}else if(x&32){F.mode=xc;break e}else{t.msg="invalid literal/length code",F.mode=Nr;break e}break}}while(n<i&&o<s);R=g>>3,n-=R,g-=R<<3,h&=(1<<g)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<s?257+(s-o):257-(o-s),F.hold=h,F.bits=g},lt=15,_a=852,ba=592,xa=0,zn=1,ya=2,vc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ec=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Tc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ac=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Cc=(r,t,e,n,i,o,a,s)=>{let l=s.bits,u=0,f=0,c=0,p=0,h=0,g=0,_=0,T=0,A=0,S=0,E,x,R,$,v,C=null,I,k=new Uint16Array(lt+1),F=new Uint16Array(lt+1),De=null,Oi,or,ar;for(u=0;u<=lt;u++)k[u]=0;for(f=0;f<n;f++)k[t[e+f]]++;for(h=l,p=lt;p>=1&&k[p]===0;p--);if(h>p&&(h=p),p===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(c=1;c<p&&k[c]===0;c++);for(h<c&&(h=c),T=1,u=1;u<=lt;u++)if(T<<=1,T-=k[u],T<0)return-1;if(T>0&&(r===xa||p!==1))return-1;for(F[1]=0,u=1;u<lt;u++)F[u+1]=F[u]+k[u];for(f=0;f<n;f++)t[e+f]!==0&&(a[F[t[e+f]]++]=f);if(r===xa?(C=De=a,I=20):r===zn?(C=vc,De=Ec,I=257):(C=Tc,De=Ac,I=0),S=0,f=0,u=c,v=o,g=h,_=0,R=-1,A=1<<h,$=A-1,r===zn&&A>_a||r===ya&&A>ba)return 1;for(;;){Oi=u-_,a[f]+1<I?(or=0,ar=a[f]):a[f]>=I?(or=De[a[f]-I],ar=C[a[f]-I]):(or=32+64,ar=0),E=1<<u-_,x=1<<g,c=x;do x-=E,i[v+(S>>_)+x]=Oi<<24|or<<16|ar|0;while(x!==0);for(E=1<<u-1;S&E;)E>>=1;if(E!==0?(S&=E-1,S+=E):S=0,f++,--k[u]===0){if(u===p)break;u=t[e+a[f]]}if(u>h&&(S&$)!==R){for(_===0&&(_=h),v+=c,g=u-_,T=1<<g;g+_<p&&(T-=k[g+_],!(T<=0));)g++,T<<=1;if(A+=1<<g,r===zn&&A>_a||r===ya&&A>ba)return 1;R=S&$,i[R]=h<<24|g<<16|v-o|0}}return S!==0&&(i[v+S]=u-_<<24|64<<16|0),s.bits=h,0},Dt=Cc,Rc=0,gs=1,_s=2,{Z_FINISH:va,Z_BLOCK:Sc,Z_TREES:Ur,Z_OK:Ge,Z_STREAM_END:kc,Z_NEED_DICT:Ic,Z_STREAM_ERROR:fe,Z_DATA_ERROR:bs,Z_MEM_ERROR:xs,Z_BUF_ERROR:$c,Z_DEFLATED:Ea}=mt,Zr=16180,Ta=16181,Aa=16182,Ca=16183,Ra=16184,Sa=16185,ka=16186,Ia=16187,$a=16188,Fa=16189,Lr=16190,Te=16191,Ln=16192,Na=16193,Mn=16194,Ua=16195,Ba=16196,Oa=16197,Pa=16198,Br=16199,Or=16200,Da=16201,za=16202,La=16203,Ma=16204,Va=16205,Vn=16206,Za=16207,Ya=16208,O=16209,ys=16210,vs=16211,Fc=852,Nc=592,Uc=15,Bc=Uc,Ha=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function Oc(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Ke=r=>{if(!r)return 1;let t=r.state;return!t||t.strm!==r||t.mode<Zr||t.mode>vs?1:0},Es=r=>{if(Ke(r))return fe;let t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=Zr,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Fc),t.distcode=t.distdyn=new Int32Array(Nc),t.sane=1,t.back=-1,Ge},Ts=r=>{if(Ke(r))return fe;let t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,Es(r)},As=(r,t)=>{let e;if(Ke(r))return fe;let n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?fe:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,Ts(r))},Cs=(r,t)=>{if(!r)return fe;let e=new Oc;r.state=e,e.strm=r,e.window=null,e.mode=Zr;let n=As(r,t);return n!==Ge&&(r.state=null),n},Pc=r=>Cs(r,Bc),ja=!0,Zn,Yn,Dc=r=>{if(ja){Zn=new Int32Array(512),Yn=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Dt(gs,r.lens,0,288,Zn,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Dt(_s,r.lens,0,32,Yn,0,r.work,{bits:5}),ja=!1}r.lencode=Zn,r.lenbits=9,r.distcode=Yn,r.distbits=5},Rs=(r,t,e,n)=>{let i,o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(e-o.wsize,e),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(e-n,e-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(e-n,e),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},zc=(r,t)=>{let e,n,i,o,a,s,l,u,f,c,p,h,g,_,T=0,A,S,E,x,R,$,v,C,I=new Uint8Array(4),k,F,De=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ke(r)||!r.output||!r.input&&r.avail_in!==0)return fe;e=r.state,e.mode===Te&&(e.mode=Ln),a=r.next_out,i=r.output,l=r.avail_out,o=r.next_in,n=r.input,s=r.avail_in,u=e.hold,f=e.bits,c=s,p=l,C=Ge;e:for(;;)switch(e.mode){case Zr:if(e.wrap===0){e.mode=Ln;break}for(;f<16;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if(e.wrap&2&&u===35615){e.wbits===0&&(e.wbits=15),e.check=0,I[0]=u&255,I[1]=u>>>8&255,e.check=L(e.check,I,2,0),u=0,f=0,e.mode=Ta;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((u&255)<<8)+(u>>8))%31){r.msg="incorrect header check",e.mode=O;break}if((u&15)!==Ea){r.msg="unknown compression method",e.mode=O;break}if(u>>>=4,f-=4,v=(u&15)+8,e.wbits===0&&(e.wbits=v),v>15||v>e.wbits){r.msg="invalid window size",e.mode=O;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=u&512?Fa:Te,u=0,f=0;break;case Ta:for(;f<16;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if(e.flags=u,(e.flags&255)!==Ea){r.msg="unknown compression method",e.mode=O;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=O;break}e.head&&(e.head.text=u>>8&1),e.flags&512&&e.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,e.check=L(e.check,I,2,0)),u=0,f=0,e.mode=Aa;case Aa:for(;f<32;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}e.head&&(e.head.time=u),e.flags&512&&e.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,e.check=L(e.check,I,4,0)),u=0,f=0,e.mode=Ca;case Ca:for(;f<16;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}e.head&&(e.head.xflags=u&255,e.head.os=u>>8),e.flags&512&&e.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,e.check=L(e.check,I,2,0)),u=0,f=0,e.mode=Ra;case Ra:if(e.flags&1024){for(;f<16;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}e.length=u,e.head&&(e.head.extra_len=u),e.flags&512&&e.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,e.check=L(e.check,I,2,0)),u=0,f=0}else e.head&&(e.head.extra=null);e.mode=Sa;case Sa:if(e.flags&1024&&(h=e.length,h>s&&(h=s),h&&(e.head&&(v=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(o,o+h),v)),e.flags&512&&e.wrap&4&&(e.check=L(e.check,n,h,o)),s-=h,o+=h,e.length-=h),e.length))break e;e.length=0,e.mode=ka;case ka:if(e.flags&2048){if(s===0)break e;h=0;do v=n[o+h++],e.head&&v&&e.length<65536&&(e.head.name+=String.fromCharCode(v));while(v&&h<s);if(e.flags&512&&e.wrap&4&&(e.check=L(e.check,n,h,o)),s-=h,o+=h,v)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=Ia;case Ia:if(e.flags&4096){if(s===0)break e;h=0;do v=n[o+h++],e.head&&v&&e.length<65536&&(e.head.comment+=String.fromCharCode(v));while(v&&h<s);if(e.flags&512&&e.wrap&4&&(e.check=L(e.check,n,h,o)),s-=h,o+=h,v)break e}else e.head&&(e.head.comment=null);e.mode=$a;case $a:if(e.flags&512){for(;f<16;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if(e.wrap&4&&u!==(e.check&65535)){r.msg="header crc mismatch",e.mode=O;break}u=0,f=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=Te;break;case Fa:for(;f<32;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}r.adler=e.check=Ha(u),u=0,f=0,e.mode=Lr;case Lr:if(e.havedict===0)return r.next_out=a,r.avail_out=l,r.next_in=o,r.avail_in=s,e.hold=u,e.bits=f,Ic;r.adler=e.check=1,e.mode=Te;case Te:if(t===Sc||t===Ur)break e;case Ln:if(e.last){u>>>=f&7,f-=f&7,e.mode=Vn;break}for(;f<3;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}switch(e.last=u&1,u>>>=1,f-=1,u&3){case 0:e.mode=Na;break;case 1:if(Dc(e),e.mode=Br,t===Ur){u>>>=2,f-=2;break e}break;case 2:e.mode=Ba;break;case 3:r.msg="invalid block type",e.mode=O}u>>>=2,f-=2;break;case Na:for(u>>>=f&7,f-=f&7;f<32;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if((u&65535)!==(u>>>16^65535)){r.msg="invalid stored block lengths",e.mode=O;break}if(e.length=u&65535,u=0,f=0,e.mode=Mn,t===Ur)break e;case Mn:e.mode=Ua;case Ua:if(h=e.length,h){if(h>s&&(h=s),h>l&&(h=l),h===0)break e;i.set(n.subarray(o,o+h),a),s-=h,o+=h,l-=h,a+=h,e.length-=h;break}e.mode=Te;break;case Ba:for(;f<14;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if(e.nlen=(u&31)+257,u>>>=5,f-=5,e.ndist=(u&31)+1,u>>>=5,f-=5,e.ncode=(u&15)+4,u>>>=4,f-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=O;break}e.have=0,e.mode=Oa;case Oa:for(;e.have<e.ncode;){for(;f<3;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}e.lens[De[e.have++]]=u&7,u>>>=3,f-=3}for(;e.have<19;)e.lens[De[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,k={bits:e.lenbits},C=Dt(Rc,e.lens,0,19,e.lencode,0,e.work,k),e.lenbits=k.bits,C){r.msg="invalid code lengths set",e.mode=O;break}e.have=0,e.mode=Pa;case Pa:for(;e.have<e.nlen+e.ndist;){for(;T=e.lencode[u&(1<<e.lenbits)-1],A=T>>>24,S=T>>>16&255,E=T&65535,!(A<=f);){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if(E<16)u>>>=A,f-=A,e.lens[e.have++]=E;else{if(E===16){for(F=A+2;f<F;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if(u>>>=A,f-=A,e.have===0){r.msg="invalid bit length repeat",e.mode=O;break}v=e.lens[e.have-1],h=3+(u&3),u>>>=2,f-=2}else if(E===17){for(F=A+3;f<F;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}u>>>=A,f-=A,v=0,h=3+(u&7),u>>>=3,f-=3}else{for(F=A+7;f<F;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}u>>>=A,f-=A,v=0,h=11+(u&127),u>>>=7,f-=7}if(e.have+h>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=O;break}for(;h--;)e.lens[e.have++]=v}}if(e.mode===O)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=O;break}if(e.lenbits=9,k={bits:e.lenbits},C=Dt(gs,e.lens,0,e.nlen,e.lencode,0,e.work,k),e.lenbits=k.bits,C){r.msg="invalid literal/lengths set",e.mode=O;break}if(e.distbits=6,e.distcode=e.distdyn,k={bits:e.distbits},C=Dt(_s,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,k),e.distbits=k.bits,C){r.msg="invalid distances set",e.mode=O;break}if(e.mode=Br,t===Ur)break e;case Br:e.mode=Or;case Or:if(s>=6&&l>=258){r.next_out=a,r.avail_out=l,r.next_in=o,r.avail_in=s,e.hold=u,e.bits=f,yc(r,p),a=r.next_out,i=r.output,l=r.avail_out,o=r.next_in,n=r.input,s=r.avail_in,u=e.hold,f=e.bits,e.mode===Te&&(e.back=-1);break}for(e.back=0;T=e.lencode[u&(1<<e.lenbits)-1],A=T>>>24,S=T>>>16&255,E=T&65535,!(A<=f);){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if(S&&(S&240)===0){for(x=A,R=S,$=E;T=e.lencode[$+((u&(1<<x+R)-1)>>x)],A=T>>>24,S=T>>>16&255,E=T&65535,!(x+A<=f);){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}u>>>=x,f-=x,e.back+=x}if(u>>>=A,f-=A,e.back+=A,e.length=E,S===0){e.mode=Va;break}if(S&32){e.back=-1,e.mode=Te;break}if(S&64){r.msg="invalid literal/length code",e.mode=O;break}e.extra=S&15,e.mode=Da;case Da:if(e.extra){for(F=e.extra;f<F;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}e.length+=u&(1<<e.extra)-1,u>>>=e.extra,f-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=za;case za:for(;T=e.distcode[u&(1<<e.distbits)-1],A=T>>>24,S=T>>>16&255,E=T&65535,!(A<=f);){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if((S&240)===0){for(x=A,R=S,$=E;T=e.distcode[$+((u&(1<<x+R)-1)>>x)],A=T>>>24,S=T>>>16&255,E=T&65535,!(x+A<=f);){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}u>>>=x,f-=x,e.back+=x}if(u>>>=A,f-=A,e.back+=A,S&64){r.msg="invalid distance code",e.mode=O;break}e.offset=E,e.extra=S&15,e.mode=La;case La:if(e.extra){for(F=e.extra;f<F;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}e.offset+=u&(1<<e.extra)-1,u>>>=e.extra,f-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=O;break}e.mode=Ma;case Ma:if(l===0)break e;if(h=p-l,e.offset>h){if(h=e.offset-h,h>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=O;break}h>e.wnext?(h-=e.wnext,g=e.wsize-h):g=e.wnext-h,h>e.length&&(h=e.length),_=e.window}else _=i,g=a-e.offset,h=e.length;h>l&&(h=l),l-=h,e.length-=h;do i[a++]=_[g++];while(--h);e.length===0&&(e.mode=Or);break;case Va:if(l===0)break e;i[a++]=e.length,l--,e.mode=Or;break;case Vn:if(e.wrap){for(;f<32;){if(s===0)break e;s--,u|=n[o++]<<f,f+=8}if(p-=l,r.total_out+=p,e.total+=p,e.wrap&4&&p&&(r.adler=e.check=e.flags?L(e.check,i,p,a-p):Zt(e.check,i,p,a-p)),p=l,e.wrap&4&&(e.flags?u:Ha(u))!==e.check){r.msg="incorrect data check",e.mode=O;break}u=0,f=0}e.mode=Za;case Za:if(e.wrap&&e.flags){for(;f<32;){if(s===0)break e;s--,u+=n[o++]<<f,f+=8}if(e.wrap&4&&u!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=O;break}u=0,f=0}e.mode=Ya;case Ya:C=kc;break e;case O:C=bs;break e;case ys:return xs;case vs:default:return fe}return r.next_out=a,r.avail_out=l,r.next_in=o,r.avail_in=s,e.hold=u,e.bits=f,(e.wsize||p!==r.avail_out&&e.mode<O&&(e.mode<Vn||t!==va))&&Rs(r,r.output,r.next_out,p-r.avail_out),c-=r.avail_in,p-=r.avail_out,r.total_in+=c,r.total_out+=p,e.total+=p,e.wrap&4&&p&&(r.adler=e.check=e.flags?L(e.check,i,p,r.next_out-p):Zt(e.check,i,p,r.next_out-p)),r.data_type=e.bits+(e.last?64:0)+(e.mode===Te?128:0)+(e.mode===Br||e.mode===Mn?256:0),(c===0&&p===0||t===va)&&C===Ge&&(C=$c),C},Lc=r=>{if(Ke(r))return fe;let t=r.state;return t.window&&(t.window=null),r.state=null,Ge},Mc=(r,t)=>{if(Ke(r))return fe;let e=r.state;return(e.wrap&2)===0?fe:(e.head=t,t.done=!1,Ge)},Vc=(r,t)=>{let e=t.length,n,i,o;return Ke(r)||(n=r.state,n.wrap!==0&&n.mode!==Lr)?fe:n.mode===Lr&&(i=1,i=Zt(i,t,e,0),i!==n.check)?bs:(o=Rs(r,t,e,e),o?(n.mode=ys,xs):(n.havedict=1,Ge))},Zc=Ts,Yc=As,Hc=Es,jc=Pc,Wc=Cs,qc=zc,Gc=Lc,Kc=Mc,Xc=Vc,Jc="pako inflate (from Nodeca project)",Ce={inflateReset:Zc,inflateReset2:Yc,inflateResetKeep:Hc,inflateInit:jc,inflateInit2:Wc,inflate:qc,inflateEnd:Gc,inflateGetHeader:Kc,inflateSetDictionary:Xc,inflateInfo:Jc};function Qc(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ep=Qc,Ss=Object.prototype.toString,{Z_NO_FLUSH:tp,Z_FINISH:rp,Z_OK:jt,Z_STREAM_END:Hn,Z_NEED_DICT:jn,Z_STREAM_ERROR:np,Z_DATA_ERROR:Wa,Z_MEM_ERROR:ip}=mt;function Kt(r){this.options=Vr.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ms,this.strm.avail_out=0;let e=Ce.inflateInit2(this.strm,t.windowBits);if(e!==jt)throw new Error(We[e]);if(this.header=new ep,Ce.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Ht.string2buf(t.dictionary):Ss.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Ce.inflateSetDictionary(this.strm,t.dictionary),e!==jt)))throw new Error(We[e])}Kt.prototype.push=function(r,t){let e=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,a,s;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?rp:tp,Ss.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),o=Ce.inflate(e,a),o===jn&&i&&(o=Ce.inflateSetDictionary(e,i),o===jt?o=Ce.inflate(e,a):o===Wa&&(o=jn));e.avail_in>0&&o===Hn&&e.state.wrap>0&&r[e.next_in]!==0;)Ce.inflateReset(e),o=Ce.inflate(e,a);switch(o){case np:case Wa:case jn:case ip:return this.onEnd(o),this.ended=!0,!1}if(s=e.avail_out,e.next_out&&(e.avail_out===0||o===Hn))if(this.options.to==="string"){let l=Ht.utf8border(e.output,e.next_out),u=e.next_out-l,f=Ht.buf2string(e.output,l);e.next_out=u,e.avail_out=n-u,u&&e.output.set(e.output.subarray(l,l+u),0),this.onData(f)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(o===jt&&s===0)){if(o===Hn)return o=Ce.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Kt.prototype.onData=function(r){this.chunks.push(r)};Kt.prototype.onEnd=function(r){r===jt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Vr.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function fi(r,t){let e=new Kt(t);if(e.push(r),e.err)throw e.msg||We[e.err];return e.result}function op(r,t){return t=t||{},t.raw=!0,fi(r,t)}var ap=Kt,sp=fi,fp=op,up=fi,lp=mt,hp={Inflate:ap,inflate:sp,inflateRaw:fp,ungzip:up,constants:lp},{Deflate:bd,deflate:xd,deflateRaw:yd,gzip:vd}=bc,{Inflate:Ed,inflate:Td,inflateRaw:cp,ungzip:Ad}=hp;var ks=cp;function Is(r){return ks(r.subarray(2))}d();m();var ui=class extends Error{constructor(t){super(t),this.code="ERR_ABORTED"}};function $s(r){r.sort((i,o)=>Number(i.offset)-Number(o.offset));let t=[],e,n;for(let i=0;i<r.length;i+=1)e&&n&&Number(r[i].offset)-n<=2e3?(e.length=BigInt(Number(e.length)+Number(r[i].length)-n+Number(r[i].offset)),e.blocks.push(r[i])):t.push(e={blocks:[r[i]],length:r[i].length,offset:r[i].offset}),n=Number(e.offset)+Number(e.length);return t}function Xt(r){if(!!r&&r.aborted){if(typeof DOMException!="undefined")throw new DOMException("aborted","AbortError");{let t=new ui("aborted");throw t.code="ERR_ABORTED",t}}}var pp=1,dp=2,mp=3;function li(r,t,e,n){return r<n&&t>=e}function wp(r){let t=r?"big":"little",e=new N().endianess(t).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),n=new N().endianess(t).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:new N().endianess(t).array("blocksToFetch",{length:"cnt",type:new N().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:new N().array("recurOffsets",{length:"cnt",type:new N().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),i=new N().endianess(t).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:new N().endianess(t).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{[mp]:new N().array("items",{length:"itemCount",type:new N().floatle("score")}),[dp]:new N().array("items",{length:"itemCount",type:new N().endianess(t).int32("start").floatle("score")}),[pp]:new N().array("items",{length:"itemCount",type:new N().endianess(t).int32("start").int32("end").floatle("score")})}}),bigBedParser:i,summaryParser:e,leafParser:n}}var _t=class{constructor(t,e,n,i,o,a){if(this.bbi=t,this.refsByName=e,this.cirTreeOffset=n,this.isBigEndian=i,this.isCompressed=o,this.blockType=a,this.featureCache=new Fs.default({cache:new Ns.default({maxSize:1e3}),fill:async(l,u)=>{let f=Number(l.length),c=Number(l.offset),{buffer:p}=await this.bbi.read(b.alloc(f),0,f,c,{signal:u});return p}}),!(n>=0))throw new Error("invalid cirTreeOffset!");let s=wp(i);this.leafParser=s.leafParser,this.bigBedParser=s.bigBedParser}async readWigData(t,e,n,i,o){try{let{refsByName:a,bbi:s,cirTreeOffset:l,isBigEndian:u}=this,f=a[t];f===void 0&&i.complete();let c={chrId:f,start:e,end:n};this.cirTreePromise||(this.cirTreePromise=s.read(b.alloc(48),0,48,Number(l),o));let{buffer:p}=await this.cirTreePromise,h=u?p.readUInt32BE(4):p.readUInt32LE(4),g=[],_=0,T=(x,R,$)=>{try{let v=x.subarray(R),C=this.leafParser.parse(v);if(C.blocksToFetch&&(g=g.concat(C.blocksToFetch.filter(A).map(I=>({offset:I.blockOffset,length:I.blockSize})))),C.recurOffsets){let I=C.recurOffsets.filter(A).map(k=>Number(k.blockOffset));I.length>0&&E(I,$+1)}}catch(v){i.error(v)}},A=x=>{let{startChrom:R,startBase:$,endChrom:v,endBase:C}=x;return(R<f||R===f&&$<=n)&&(v>f||v===f&&C>=e)},S=async(x,R,$)=>{try{let v=R.max()-R.min(),C=R.min(),I=await this.featureCache.get(`${v}_${C}`,{length:v,offset:C},o.signal);for(let k=0;k<x.length;k+=1)R.contains(x[k])&&(T(I,x[k]-C,$),_-=1,_===0&&this.readFeatures(i,g,{...o,request:c}))}catch(v){i.error(v)}},E=(x,R)=>{try{_+=x.length;let $=4+Number(h)*32,v=new ae(x[0],x[0]+$);for(let C=1;C<x.length;C+=1){let I=new ae(x[C],x[C]+$);v=v.union(I)}v.getRanges().map(C=>S(x,C,R))}catch($){i.error($)}};return E([Number(l)+48],1)}catch(a){i.error(a)}}parseSummaryBlock(t,e,n){let i=[],o=e,a=new DataView(t.buffer,t.byteOffset,t.length);for(;o<t.byteLength;){let s=a.getUint32(o,!0);o+=4;let l=a.getUint32(o,!0);o+=4;let u=a.getUint32(o,!0);o+=4;let f=a.getUint32(o,!0);o+=4;let c=a.getFloat32(o,!0);o+=4;let p=a.getFloat32(o,!0);o+=4;let h=a.getFloat32(o,!0);o+=4,o+=4,(!n||s===n.chrId&&li(l,u,n.start,n.end))&&i.push({start:l,end:u,maxScore:p,minScore:c,summary:!0,score:h/(f||1)})}return i}parseBigBedBlock(t,e,n,i){let o=[],a=e;for(;a<t.byteLength;){let s=this.bigBedParser.parse(t.subarray(a));o.push({...s,uniqueId:`bb-${n+a}`}),a+=s.offset}return i?o.filter(s=>li(s.start,s.end,i.start,i.end)):o}parseBigWigBlock(t,e,n){let i=t.subarray(e),o=new DataView(i.buffer,i.byteOffset,i.length),a=0;a+=4;let s=o.getInt32(a,!0);a+=8;let l=o.getUint32(a,!0);a+=4;let u=o.getUint32(a,!0);a+=4;let f=o.getUint8(a);a+=2;let c=o.getUint16(a,!0);a+=2;let p=new Array(c);switch(f){case 1:for(let h=0;h<c;h++){let g=o.getInt32(a,!0);a+=4;let _=o.getInt32(a,!0);a+=4;let T=o.getFloat32(a,!0);a+=4,p[h]={start:g,end:_,score:T}}break;case 2:for(let h=0;h<c;h++){let g=o.getInt32(a,!0);a+=4;let _=o.getFloat32(a,!0);a+=4,p[h]={score:_,start:g,end:g+u}}break;case 3:for(let h=0;h<c;h++){let g=o.getFloat32(a,!0);a+=4;let _=s+h*l;p[h]={score:g,start:_,end:_+u}}break}return n?p.filter(h=>li(h.start,h.end,n.start,n.end)):p}async readFeatures(t,e,n={}){try{let{blockType:i,isCompressed:o}=this,{signal:a,request:s}=n,l=$s(e);Xt(a),await Promise.all(l.map(async u=>{Xt(a);let{length:f,offset:c}=u,p=await this.featureCache.get(`${f}_${c}`,u,a);u.blocks.forEach(h=>{Xt(a);let g=Number(h.offset)-Number(u.offset),_=p;switch(o&&(_=Is(p.subarray(g)),g=0),Xt(a),i){case"summary":t.next(this.parseSummaryBlock(_,g,s));break;case"bigwig":t.next(this.parseBigWigBlock(_,g,s));break;case"bigbed":t.next(this.parseBigBedBlock(_,g,Number(h.offset)*(1<<8),s));break;default:console.warn(`Don't know what to do with ${i}`)}})})),t.complete()}catch(i){t.error(i)}}};d();m();d();m();var gp=xe(hi());d();m();var Xe=class{async getBufferFromResponse(t){let e=await t.arrayBuffer();return b.from(e)}constructor(t,e={}){this.baseOverrides={},this.url=t;let n=e.fetch||globalThis.fetch.bind(globalThis);if(!n)throw new TypeError("no fetch function supplied, and none found in global environment");e.overrides&&(this.baseOverrides=e.overrides),this.fetchImplementation=n}async fetch(t,e){let n;try{n=await this.fetchImplementation(t,e)}catch(i){if(`${i}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`),n=await this.fetchImplementation(t,{...e,cache:"reload"});else throw i}return n}async read(t,e=0,n,i=0,o={}){let{headers:a={},signal:s,overrides:l={}}=o;n<1/0?a.range=`bytes=${i}-${i+n}`:n===1/0&&i!==0&&(a.range=`bytes=${i}-`);let u={...this.baseOverrides,...l,headers:{...a,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:s},f=await this.fetch(this.url,u);if(!f.ok)throw new Error(`HTTP ${f.status} ${f.statusText} ${this.url}`);if(f.status===200&&i===0||f.status===206){let c=await this.getBufferFromResponse(f),p=c.copy(t,e,0,Math.min(n,c.length)),h=f.headers.get("content-range"),g=/\/(\d+)$/.exec(h||"");return g!=null&&g[1]&&(this._stat={size:parseInt(g[1],10)}),{bytesRead:p,buffer:t}}throw f.status===200?new Error("${this.url} fetch returned status 200, expected 206"):new Error(`HTTP ${f.status} fetching ${this.url}`)}async readFile(t={}){let e,n;typeof t=="string"?(e=t,n={}):(e=t.encoding,n=t,delete n.encoding);let{headers:i={},signal:o,overrides:a={}}=n,s={headers:i,method:"GET",redirect:"follow",mode:"cors",signal:o,...this.baseOverrides,...a},l=await this.fetch(this.url,s);if(!l)throw new Error("generic-filehandle failed to fetch");if(l.status!==200)throw Object.assign(new Error(`HTTP ${l.status} fetching ${this.url}`),{status:l.status});if(e==="utf8")return l.text();if(e)throw new Error(`unsupported encoding: ${e}`);return this.getBufferFromResponse(l)}async stat(){if(!this._stat){let t=b.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}};d();m();d();m();var ci=xe(hi());d();m();d();m();d();m();d();m();var pi=function(r,t){return pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},pi(r,t)};function Jt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");pi(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function di(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function bt(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o}function xt(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))}d();m();function X(r){return typeof r=="function"}d();m();d();m();d();m();function Yr(r){var t=function(n){Error.call(n),n.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Hr=Yr(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});d();m();function mi(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}var jr=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=di(a),l=s.next();!l.done;l=s.next()){var u=l.value;u.remove(this)}}catch(_){t={error:_}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else a.remove(this);var f=this.initialTeardown;if(X(f))try{f()}catch(_){o=_ instanceof Hr?_.errors:[_]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var p=di(c),h=p.next();!h.done;h=p.next()){var g=h.value;try{Us(g)}catch(_){o=o!=null?o:[],_ instanceof Hr?o=xt(xt([],bt(o)),bt(_.errors)):o.push(_)}}}catch(_){n={error:_}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}if(o)throw new Hr(o)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)Us(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&mi(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&mi(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}();var im=jr.EMPTY;function Wr(r){return r instanceof jr||r&&"closed"in r&&X(r.remove)&&X(r.add)&&X(r.unsubscribe)}function Us(r){X(r)?r():r.unsubscribe()}d();m();var he={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};d();m();d();m();var yt={setTimeout:function(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=yt.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,xt([r,t],bt(e))):setTimeout.apply(void 0,xt([r,t],bt(e)))},clearTimeout:function(r){var t=yt.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function Bs(r){yt.setTimeout(function(){var t=he.onUnhandledError;if(t)t(r);else throw r})}d();m();function wi(){}d();m();var Os=function(){return gi("C",void 0,void 0)}();function Ps(r){return gi("E",void 0,r)}function Ds(r){return gi("N",r,void 0)}function gi(r,t,e){return{kind:r,value:t,error:e}}d();m();var Je=null;function zs(r){if(he.useDeprecatedSynchronousErrorHandling){var t=!Je;if(t&&(Je={errorThrown:!1,error:null}),r(),t){var e=Je,n=e.errorThrown,i=e.error;if(Je=null,n)throw i}}else r()}function Ls(r){he.useDeprecatedSynchronousErrorHandling&&Je&&(Je.errorThrown=!0,Je.error=r)}var Qt=function(r){Jt(t,r);function t(e){var n=r.call(this)||this;return n.isStopped=!1,e?(n.destination=e,Wr(e)&&e.add(n)):n.destination=yp,n}return t.create=function(e,n,i){return new vt(e,n,i)},t.prototype.next=function(e){this.isStopped?bi(Ds(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?bi(Ps(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?bi(Os,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(jr);var _p=Function.prototype.bind;function _i(r,t){return _p.call(r,t)}var bp=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){qr(n)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){qr(n)}else qr(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){qr(e)}},r}(),vt=function(r){Jt(t,r);function t(e,n,i){var o=r.call(this)||this,a;if(X(e)||!e)a={next:e!=null?e:void 0,error:n!=null?n:void 0,complete:i!=null?i:void 0};else{var s;o&&he.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=function(){return o.unsubscribe()},a={next:e.next&&_i(e.next,s),error:e.error&&_i(e.error,s),complete:e.complete&&_i(e.complete,s)}):a=e}return o.destination=new bp(a),o}return t}(Qt);function qr(r){he.useDeprecatedSynchronousErrorHandling?Ls(r):Bs(r)}function xp(r){throw r}function bi(r,t){var e=he.onStoppedNotification;e&&yt.setTimeout(function(){return e(r,t)})}var yp={closed:!0,next:wi,error:xp,complete:wi};d();m();var Ms=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();d();m();d();m();function Vs(r){return r}function Zs(r){return r.length===0?Vs:r.length===1?r[0]:function(e){return r.reduce(function(n,i){return i(n)},e)}}var xi=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this,o=Ep(t)?t:new vt(t,e,n);return zs(function(){var a=i,s=a.operator,l=a.source;o.add(s?s.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var n=this;return e=Ys(e),new e(function(i,o){var a=new vt({next:function(s){try{t(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});n.subscribe(a)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[Ms]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zs(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=Ys(t),new t(function(n,i){var o;e.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();function Ys(r){var t;return(t=r!=null?r:he.Promise)!==null&&t!==void 0?t:Promise}function vp(r){return r&&X(r.next)&&X(r.error)&&X(r.complete)}function Ep(r){return r&&r instanceof Qt||vp(r)&&Wr(r)}d();m();function Tp(r){return X(r==null?void 0:r.lift)}function Gr(r){return function(t){if(Tp(t))return t.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}d();m();function Hs(r,t,e,n,i){return new Ap(r,t,e,n,i)}var Ap=function(r){Jt(t,r);function t(e,n,i,o,a,s){var l=r.call(this,e)||this;return l.onFinalize=a,l.shouldUnsubscribe=s,l._next=n?function(u){try{n(u)}catch(f){e.error(f)}}:r.prototype._next,l._error=o?function(u){try{o(u)}catch(f){e.error(f)}finally{this.unsubscribe()}}:r.prototype._error,l._complete=i?function(){try{i()}catch(u){e.error(u)}finally{this.unsubscribe()}}:r.prototype._complete,l}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(Qt);d();m();var js=Yr(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}});d();m();function yi(r,t){var e=typeof t=="object";return new Promise(function(n,i){var o=new vt({next:function(a){n(a),o.unsubscribe()},error:i,complete:function(){e?n(t.defaultValue):i(new js)}});r.subscribe(o)})}d();m();d();m();d();m();function Ws(r,t,e,n,i){return function(o,a){var s=e,l=t,u=0;o.subscribe(Hs(a,function(f){var c=u++;l=s?r(l,f,c):(s=!0,f),n&&a.next(l)},i&&function(){s&&a.next(l),a.complete()}))}}function qs(r,t){return Gr(Ws(r,t,arguments.length>=2,!1,!0))}var Cp=function(r,t){return r.push(t),r};function vi(){return Gr(function(r,t){qs(Cp,[])(r).subscribe(t)})}d();m();var Gs=-2003829722,Ei=-2021002517;function Rp(r){return new TextDecoder().decode(r)}function Ks(r){let t=r?"big":"little",e=new N().endianess(t).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:new N().endianess(t).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),n=new N().endianess(t).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares"),i=new N().endianess(t).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),o=new N().endianess(t).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset");return{chromTreeParser:i,totalSummaryParser:n,headerParser:e,isLeafNode:o}}var er=class{getHeader(t={}){let e="aborted"in t?{signal:t}:t;return this.headerP||(this.headerP=this._getHeader(e).catch(n=>{throw this.headerP=void 0,n})),this.headerP}constructor(t={}){let{filehandle:e,renameRefSeqs:n=a=>a,path:i,url:o}=t;if(this.renameRefSeqs=n,e)this.bbi=e;else if(o)this.bbi=new Xe(o);else if(i)this.bbi=new ci.default(i);else throw new Error("no file given")}async _getHeader(t){let e=await this._getMainHeader(t),n=await this._readChromTree(e,t);return{...e,...n}}async _getMainHeader(t,e=2e3){let{buffer:n}=await this.bbi.read(b.alloc(e),0,e,0,t),i=this._isBigEndian(n),o=Ks(i),a=o.headerParser.parse(n),{magic:s,asOffset:l,totalSummaryOffset:u}=a;if(a.fileType=s===Ei?"bigbed":"bigwig",l>e||u>e)return this._getMainHeader(t,e*2);if(l){let f=Number(a.asOffset);a.autoSql=Rp(n.subarray(f,n.indexOf(0,f)))}if(a.totalSummaryOffset>e)return this._getMainHeader(t,e*2);if(a.totalSummaryOffset){let f=n.subarray(Number(a.totalSummaryOffset)),c=o.totalSummaryParser.parse(f);a.totalSummary={...c,basesCovered:Number(c.basesCovered)}}return{...a,isBigEndian:i}}_isBigEndian(t){let e=t.readInt32LE(0);if(e===Gs||e===Ei)return!1;if(e=t.readInt32BE(0),e===Gs||e===Ei)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(t,e){let n=t.isBigEndian,i=n?"big":"little",o=[],a={},s=Number(t.unzoomedDataOffset),l=Number(t.chromTreeOffset);for(;s%4!==0;)s+=1;let u=s-l,{buffer:f}=await this.bbi.read(b.alloc(u),0,u,Number(l),e),c=Ks(n),{keySize:p}=c.chromTreeParser.parse(f),h=new N().endianess(i).string("key",{stripNull:!0,length:p}).uint32("refId").uint32("refSize").saveOffset("offset"),g=new N().endianess(i).skip(p).uint64("childOffset").saveOffset("offset"),_=32,T=async A=>{let S=A;if(S>=f.length)throw new Error("reading beyond end of buffer");let E=c.isLeafNode.parse(f.subarray(S)),{isLeafNode:x,cnt:R}=E;if(S+=E.offset,x)for(let $=0;$<R;$+=1){let v=h.parse(f.subarray(S));S+=v.offset;let{key:C,refId:I,refSize:k}=v,F={name:C,id:I,length:k};a[this.renameRefSeqs(C)]=I,o[I]=F}else{let $=[];for(let v=0;v<R;v+=1){let C=g.parse(f.subarray(S)),{childOffset:I}=C;S+=C.offset,$.push(T(Number(I)-Number(l)))}await Promise.all($)}};return await T(_),{refsByName:a,refsByNumber:o}}async getUnzoomedView(t){let{unzoomedIndexOffset:e,refsByName:n,uncompressBufSize:i,isBigEndian:o,fileType:a}=await this.getHeader(t);return new _t(this.bbi,n,e,o,i>0,a)}async getFeatureStream(t,e,n,i={scale:1}){await this.getHeader(i);let o=this.renameRefSeqs(t),a;if(i.basesPerSpan?a=await this.getView(1/i.basesPerSpan,i):i.scale?a=await this.getView(i.scale,i):a=await this.getView(1,i),!a)throw new Error("unable to get block view for data");return new xi(s=>{a.readWigData(o,e,n,s,i)})}async getFeatures(t,e,n,i={scale:1}){let o=await this.getFeatureStream(t,e,n,i);return(await yi(o.pipe(vi()))).flat()}};var Et=class extends er{async getView(t,e){let{zoomLevels:n,refsByName:i,fileSize:o,isBigEndian:a,uncompressBufSize:s}=await this.getHeader(e),l=1/t,u=n.length;o||(u-=1);for(let f=u;f>=0;f-=1){let c=n[f];if(c&&c.reductionLevel<=2*l){let p=Number(c.indexOffset);return new _t(this.bbi,i,p,a,s>0,"summary")}}return this.getUnzoomedView(e)}};d();m();var Sp=xe(In()),kp=xe(Fn());d();m();var Ip=xe(Xs());d();m();var Ti=xe(Js()),Qe=class{async getBufferFromResponse(t){if(typeof t.buffer=="function")return t.buffer();if(typeof t.arrayBuffer=="function"){let e=await t.arrayBuffer();return b.from(e)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(t,e={}){this.auth={},this.baseOverrides={},this.url=t,this.auth=e.auth||{};let n=e.fetch||globalThis.fetch.bind(globalThis);if(!n)throw new TypeError("no fetch function supplied, and none found in global environment");e.overrides&&(this.baseOverrides=e.overrides),this.fetchImplementation=n}async fetch(t,e){let n;try{n=await this.fetchImplementation(t,e)}catch(i){if(`${i}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`),n=await this.fetchImplementation(t,{...e,cache:"reload"});else throw i}return n}async read(t,e=0,n,i=0,o={}){let{headers:a={},signal:s,overrides:l={}}=o;n<1/0?a.range=`bytes=${i}-${i+n}`:n===1/0&&i!==0&&(a.range=`bytes=${i}-`),this.auth&&this.auth.user&&this.auth.password&&(a.Authorization=`Basic ${(0,Ti.encode)(this.auth.user+":"+this.auth.password)}`);let u={...this.baseOverrides,...l,headers:{...a,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:s},f=await this.fetch(this.url,u);if(!f.ok)throw new Error(`HTTP ${f.status} ${f.statusText} ${this.url}`);if(f.status===200&&i===0||f.status===206){let c=await this.getBufferFromResponse(f),p=c.copy(t,e,0,Math.min(n,c.length)),h=f.headers.get("content-range"),g=/\/(\d+)$/.exec(h||"");return g&&g[1]&&(this._stat={size:parseInt(g[1],10)}),{bytesRead:p,buffer:t}}if(f.status===200)throw new Error("${this.url} fetch returned status 200, expected 206");if(f.status===404)return{bytesRead:0,buffer:t};throw new Error(`HTTP ${f.status} fetching ${this.url}`)}async readFile(t={}){let e,n;typeof t=="string"?(e=t,n={}):(e=t.encoding,n=t,delete n.encoding);let{headers:i={},signal:o,overrides:a={}}=n;this.auth&&this.auth.user&&this.auth.password&&(i.Authorization=`Basic ${(0,Ti.encode)(this.auth.user+":"+this.auth.password)}`);let s={headers:i,method:"GET",redirect:"follow",mode:"cors",signal:o,...this.baseOverrides,...a};console.log(`headers: ${JSON.stringify(i)}`);let l=await this.fetch(this.url,s);if(!l)throw new Error("generic-filehandle failed to fetch");if(l.status===404)return b.alloc(1);if(l.status!==200)throw Object.assign(new Error(`HTTP ${l.status} fetching ${this.url}`),{status:l.status});if(e==="utf8")return l.text();if(e)throw new Error(`unsupported encoding: ${e}`);return this.getBufferFromResponse(l)}async stat(){if(!this._stat){let t=b.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}};d();m();d();m();d();m();d();m();var Qs={},Ai={},Ci=34,rr=10,Ri=13;function tf(r){return new Function("d","return {"+r.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function $p(r,t){var e=tf(r);return function(n,i){return t(e(n),i,r)}}function ef(r){var t=Object.create(null),e=[];return r.forEach(function(n){for(var i in n)i in t||e.push(t[i]=i)}),e}function J(r,t){var e=r+"",n=e.length;return n<t?new Array(t-n+1).join(0)+e:e}function Fp(r){return r<0?"-"+J(-r,6):r>9999?"+"+J(r,6):J(r,4)}function Np(r){var t=r.getUTCHours(),e=r.getUTCMinutes(),n=r.getUTCSeconds(),i=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":Fp(r.getUTCFullYear(),4)+"-"+J(r.getUTCMonth()+1,2)+"-"+J(r.getUTCDate(),2)+(i?"T"+J(t,2)+":"+J(e,2)+":"+J(n,2)+"."+J(i,3)+"Z":n?"T"+J(t,2)+":"+J(e,2)+":"+J(n,2)+"Z":e||t?"T"+J(t,2)+":"+J(e,2)+"Z":"")}function rf(r){var t=new RegExp('["'+r+`
\r]`),e=r.charCodeAt(0);function n(c,p){var h,g,_=i(c,function(T,A){if(h)return h(T,A-1);g=T,h=p?$p(T,p):tf(T)});return _.columns=g||[],_}function i(c,p){var h=[],g=c.length,_=0,T=0,A,S=g<=0,E=!1;c.charCodeAt(g-1)===rr&&--g,c.charCodeAt(g-1)===Ri&&--g;function x(){if(S)return Ai;if(E)return E=!1,Qs;var $,v=_,C;if(c.charCodeAt(v)===Ci){for(;_++<g&&c.charCodeAt(_)!==Ci||c.charCodeAt(++_)===Ci;);return($=_)>=g?S=!0:(C=c.charCodeAt(_++))===rr?E=!0:C===Ri&&(E=!0,c.charCodeAt(_)===rr&&++_),c.slice(v+1,$-1).replace(/""/g,'"')}for(;_<g;){if((C=c.charCodeAt($=_++))===rr)E=!0;else if(C===Ri)E=!0,c.charCodeAt(_)===rr&&++_;else if(C!==e)continue;return c.slice(v,$)}return S=!0,c.slice(v,g)}for(;(A=x())!==Ai;){for(var R=[];A!==Qs&&A!==Ai;)R.push(A),A=x();p&&(R=p(R,T++))==null||h.push(R)}return h}function o(c,p){return c.map(function(h){return p.map(function(g){return f(h[g])}).join(r)})}function a(c,p){return p==null&&(p=ef(c)),[p.map(f).join(r)].concat(o(c,p)).join(`
`)}function s(c,p){return p==null&&(p=ef(c)),o(c,p).join(`
`)}function l(c){return c.map(u).join(`
`)}function u(c){return c.map(f).join(r)}function f(c){return c==null?"":c instanceof Date?Np(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:n,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:u,formatValue:f}}d();m();var et=rf("	"),Up=et.parse,Si=et.parseRows,Bp=et.format,Op=et.formatBody,Pp=et.formatRows,Dp=et.formatRow,zp=et.formatValue;d();m();d();m();d();m();d();m();d();m();var re="$";function Xr(){}Xr.prototype=nf.prototype={constructor:Xr,has:function(r){return re+r in this},get:function(r){return this[re+r]},set:function(r,t){return this[re+r]=t,this},remove:function(r){var t=re+r;return t in this&&delete this[t]},clear:function(){for(var r in this)r[0]===re&&delete this[r]},keys:function(){var r=[];for(var t in this)t[0]===re&&r.push(t.slice(1));return r},values:function(){var r=[];for(var t in this)t[0]===re&&r.push(this[t]);return r},entries:function(){var r=[];for(var t in this)t[0]===re&&r.push({key:t.slice(1),value:this[t]});return r},size:function(){var r=0;for(var t in this)t[0]===re&&++r;return r},empty:function(){for(var r in this)if(r[0]===re)return!1;return!0},each:function(r){for(var t in this)t[0]===re&&r(this[t],t.slice(1),this)}};function nf(r,t){var e=new Xr;if(r instanceof Xr)r.each(function(s,l){e.set(l,s)});else if(Array.isArray(r)){var n=-1,i=r.length,o;if(t==null)for(;++n<i;)e.set(n,r[n]);else for(;++n<i;)e.set(t(o=r[n],n,r),o)}else if(r)for(var a in r)e.set(a,r[a]);return e}var Tt=nf;d();m();function Jr(){}var tt=Tt.prototype;Jr.prototype=Lp.prototype={constructor:Jr,has:tt.has,add:function(r){return r+="",this[re+r]=r,this},remove:tt.remove,clear:tt.clear,values:tt.keys,size:tt.size,empty:tt.empty,each:tt.each};function Lp(r,t){var e=new Jr;if(r instanceof Jr)r.each(function(o){e.add(o)});else if(r){var n=-1,i=r.length;if(t==null)for(;++n<i;)e.add(r[n]);else for(;++n<i;)e.add(t(r[n],n,r))}return e}d();m();d();m();d();m();d();m();d();m();var Mp={value:function(){}};function af(){for(var r=0,t=arguments.length,e={},n;r<t;++r){if(!(n=arguments[r]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new Qr(e)}function Qr(r){this._=r}function Vp(r,t){return r.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}Qr.prototype=af.prototype={constructor:Qr,on:function(r,t){var e=this._,n=Vp(r+"",e),i,o=-1,a=n.length;if(arguments.length<2){for(;++o<a;)if((i=(r=n[o]).type)&&(i=Zp(e[i],r.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(r=n[o]).type)e[i]=of(e[i],r.name,t);else if(t==null)for(i in e)e[i]=of(e[i],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new Qr(r)},call:function(r,t){if((i=arguments.length-2)>0)for(var e=new Array(i),n=0,i,o;n<i;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=this._[r],n=0,i=o.length;n<i;++n)o[n].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,o=n.length;i<o;++i)n[i].value.apply(t,e)}};function Zp(r,t){for(var e=0,n=r.length,i;e<n;++e)if((i=r[e]).name===t)return i.value}function of(r,t,e){for(var n=0,i=r.length;n<i;++n)if(r[n].name===t){r[n]=Mp,r=r.slice(0,n).concat(r.slice(n+1));break}return e!=null&&r.push({name:t,value:e}),r}var ki=af;function nr(r,t){var e,n=ki("beforesend","progress","load","error"),i,o=Tt(),a=new XMLHttpRequest,s=null,l=null,u,f,c=0;typeof XDomainRequest!="undefined"&&!("withCredentials"in a)&&/^(http(s)?:)?\/\//.test(r)&&(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=a.ontimeout=p:a.onreadystatechange=function(h){a.readyState>3&&p(h)};function p(h){var g=a.status,_;if(!g&&Hp(a)||g>=200&&g<300||g===304){if(u)try{_=u.call(e,a)}catch(T){n.call("error",e,T);return}else _=a;n.call("load",e,_)}else n.call("error",e,h)}if(a.onprogress=function(h){n.call("progress",e,h)},e={header:function(h,g){return h=(h+"").toLowerCase(),arguments.length<2?o.get(h):(g==null?o.remove(h):o.set(h,g+""),e)},mimeType:function(h){return arguments.length?(i=h==null?null:h+"",e):i},responseType:function(h){return arguments.length?(f=h,e):f},timeout:function(h){return arguments.length?(c=+h,e):c},user:function(h){return arguments.length<1?s:(s=h==null?null:h+"",e)},password:function(h){return arguments.length<1?l:(l=h==null?null:h+"",e)},response:function(h){return u=h,e},get:function(h,g){return e.send("GET",h,g)},post:function(h,g){return e.send("POST",h,g)},send:function(h,g,_){return a.open(h,r,!0,s,l),i!=null&&!o.has("accept")&&o.set("accept",i+",*/*"),a.setRequestHeader&&o.each(function(T,A){a.setRequestHeader(A,T)}),i!=null&&a.overrideMimeType&&a.overrideMimeType(i),f!=null&&(a.responseType=f),c>0&&(a.timeout=c),_==null&&typeof g=="function"&&(_=g,g=null),_!=null&&_.length===1&&(_=Yp(_)),_!=null&&e.on("error",_).on("load",function(T){_(null,T)}),n.call("beforesend",e,a),a.send(g==null?null:g),e},abort:function(){return a.abort(),e},on:function(){var h=n.on.apply(n,arguments);return h===n?e:h}},t!=null){if(typeof t!="function")throw new Error("invalid callback: "+t);return e.get(t)}return e}function Yp(r){return function(t,e){r(t==null?e:null)}}function Hp(r){var t=r.responseType;return t&&t!=="text"?r.response:r.responseText}d();m();d();m();function Pe(r,t){return function(e,n){var i=nr(e).mimeType(r).response(t);if(n!=null){if(typeof n!="function")throw new Error("invalid callback: "+n);return i.get(n)}return i}}var jp=Pe("text/html",function(r){return document.createRange().createContextualFragment(r.responseText)});d();m();var Wp=Pe("application/json",function(r){return JSON.parse(r.responseText)});d();m();var Ii=Pe("text/plain",function(r){return r.responseText});d();m();var qp=Pe("application/xml",function(r){var t=r.responseXML;if(!t)throw new Error("parse error");return t});d();m();d();m();d();m();var sf={},$i={},Fi=34,ir=10,Ni=13;function uf(r){return new Function("d","return {"+r.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Gp(r,t){var e=uf(r);return function(n,i){return t(e(n),i,r)}}function ff(r){var t=Object.create(null),e=[];return r.forEach(function(n){for(var i in n)i in t||e.push(t[i]=i)}),e}function Q(r,t){var e=r+"",n=e.length;return n<t?new Array(t-n+1).join(0)+e:e}function Kp(r){return r<0?"-"+Q(-r,6):r>9999?"+"+Q(r,6):Q(r,4)}function Xp(r){var t=r.getUTCHours(),e=r.getUTCMinutes(),n=r.getUTCSeconds(),i=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":Kp(r.getUTCFullYear(),4)+"-"+Q(r.getUTCMonth()+1,2)+"-"+Q(r.getUTCDate(),2)+(i?"T"+Q(t,2)+":"+Q(e,2)+":"+Q(n,2)+"."+Q(i,3)+"Z":n?"T"+Q(t,2)+":"+Q(e,2)+":"+Q(n,2)+"Z":e||t?"T"+Q(t,2)+":"+Q(e,2)+"Z":"")}function en(r){var t=new RegExp('["'+r+`
\r]`),e=r.charCodeAt(0);function n(c,p){var h,g,_=i(c,function(T,A){if(h)return h(T,A-1);g=T,h=p?Gp(T,p):uf(T)});return _.columns=g||[],_}function i(c,p){var h=[],g=c.length,_=0,T=0,A,S=g<=0,E=!1;c.charCodeAt(g-1)===ir&&--g,c.charCodeAt(g-1)===Ni&&--g;function x(){if(S)return $i;if(E)return E=!1,sf;var $,v=_,C;if(c.charCodeAt(v)===Fi){for(;_++<g&&c.charCodeAt(_)!==Fi||c.charCodeAt(++_)===Fi;);return($=_)>=g?S=!0:(C=c.charCodeAt(_++))===ir?E=!0:C===Ni&&(E=!0,c.charCodeAt(_)===ir&&++_),c.slice(v+1,$-1).replace(/""/g,'"')}for(;_<g;){if((C=c.charCodeAt($=_++))===ir)E=!0;else if(C===Ni)E=!0,c.charCodeAt(_)===ir&&++_;else if(C!==e)continue;return c.slice(v,$)}return S=!0,c.slice(v,g)}for(;(A=x())!==$i;){for(var R=[];A!==sf&&A!==$i;)R.push(A),A=x();p&&(R=p(R,T++))==null||h.push(R)}return h}function o(c,p){return c.map(function(h){return p.map(function(g){return f(h[g])}).join(r)})}function a(c,p){return p==null&&(p=ff(c)),[p.map(f).join(r)].concat(o(c,p)).join(`
`)}function s(c,p){return p==null&&(p=ff(c)),o(c,p).join(`
`)}function l(c){return c.map(u).join(`
`)}function u(c){return c.map(f).join(r)}function f(c){return c==null?"":c instanceof Date?Xp(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:n,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:u,formatValue:f}}d();m();var rt=en(","),Ui=rt.parse,Jp=rt.parseRows,Qp=rt.format,e0=rt.formatBody,t0=rt.formatRows,r0=rt.formatRow,n0=rt.formatValue;d();m();var nt=en("	"),Bi=nt.parse,i0=nt.parseRows,o0=nt.format,a0=nt.formatBody,s0=nt.formatRows,f0=nt.formatRow,u0=nt.formatValue;d();m();function tn(r,t){return function(e,n,i){arguments.length<3&&(i=n,n=null);var o=nr(e).mimeType(r);return o.row=function(a){return arguments.length?o.response(l0(t,n=a)):n},o.row(n),i?o.get(i):o}}function l0(r,t){return function(e){return r(e.responseText,t)}}var h0=tn("text/csv",Ui);d();m();var c0=tn("text/tab-separated-values",Bi);var hf=(r,t,e)=>e.chrPositions[r].pos+t;function p0(r){let t=[],e={},n={},i=0;for(let o=0;o<r.length;o++){let a=Number(r[o][1]);i+=a;let s={id:o,chr:r[o][0],pos:i-a};t.push(s),n[s.chr]=s,e[r[o][0]]=a}return{chrToAbs:([o,a])=>hf(o,a,{chrPositions:n}),cumPositions:t,chrPositions:n,totalLength:i,chromLengths:e}}function d0(r,t){let e={};return e.absToChr=n=>e.chrPositions?absToChr(n,e):null,e.chrToAbs=([n,i]=[])=>e.chrPositions?hf(n,i,e):null,Ii(r,(n,i)=>{if(n)t&&t(null);else{let o=Si(i),a=p0(o);Object.keys(a).forEach(s=>{e[s]=a[s]}),t&&t(e)}})}var cf=function(t,...e){if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');class n{constructor(o){this.dataConfig=o,this.trackUid=lf.default.nice(),this.bwFileHeader=null,this.bwFile=null,this.TILE_SIZE=1024,this.errorTxt="",this.dataPromises=[],this.dataPromises.push(this.loadChromsizes(o)),this.dataPromises.push(this.loadBBI(o))}loadChromsizes(o){return o.chromSizesUrl?new Promise(a=>{d0(o.chromSizesUrl,s=>{this.chromSizes=s,a()})}):(console.error('Please enter a "chromSizesUrl" field to the data config'),null)}loadBBI(o){if(o.url){let a=new URL(o.url),s=a.username,l=a.password;return s&&l?(o.url=`${a.protocol}//${a.host}${a.pathname}${a.search}`,this.bwFile=new Et({filehandle:new Qe(o.url,{auth:{user:s,password:l}})})):this.bwFile=new Et({filehandle:new Qe(o.url)}),this.bwFile.getHeader().then(u=>{this.bwFileHeader=u})}else return console.error('Please enter a "url" field to the data config'),null}tilesetInfo(o){return this.tilesetInfoLoading=!0,Promise.all(this.dataPromises).then(()=>{this.tilesetInfoLoading=!1;let a={},s=this.chromSizes.totalLength;return a={tile_size:this.TILE_SIZE,max_zoom:Math.ceil(Math.log(s/this.TILE_SIZE)/Math.log(2)),max_width:2**Math.ceil(Math.log(s)/Math.log(2)),min_pos:[0],max_pos:[s]},o&&o(a),a}).catch(a=>{this.tilesetInfoLoading=!1,console.error(a),o&&o({error:`Error parsing bigwig: ${a}`})})}fetchTilesDebounced(o,a){let s={},l=[],u=[];for(let f of a){let c=f.split("."),p=parseInt(c[0],10),h=parseInt(c[1],10);if(Number.isNaN(h)||Number.isNaN(p)){console.warn("Invalid tile zoom or position:",p,h);continue}l.push(f),u.push(this.tile(p,h))}return Promise.all(u).then(f=>{for(let c=0;c<f.length;c++){let p=l[c];s[p]=f[c],s[p].tilePositionId=p}o(s)}),s}tile(o,a){return this.tilesetInfo().then(s=>{let l=+s.max_width/2**+o,u=[],f={tilePos:[a],tileId:"bigwig."+o+"."+a,zoomLevel:o},c=s.min_pos[0]+a*l,p=c,h=s.min_pos[0]+(a+1)*l,g=this.determineScale(p,h),_=(h-p)/this.TILE_SIZE,T=[];for(let E=0;E<this.TILE_SIZE;E++)T.push(p+E*_);let{chromLengths:A,cumPositions:S}=this.chromSizes;for(let E=0;E<S.length;E++){let x=S[E].chr,R=S[E].pos,$=S[E].pos+A[x],v,C;if(R<=p&&p<$)if(h>$)v=p-R,C=$-R,u.push(this.bwFile.getFeatures(x,v,C,{scale:1/g}).then(I=>(I.forEach(k=>{k.startAbs=t.utils.chrToAbs(x,k.start,this.chromSizes),k.endAbs=t.utils.chrToAbs(x,k.end,this.chromSizes)}),I))),p=$;else{v=Math.floor(p-R),C=Math.ceil(h-R),u.push(this.bwFile.getFeatures(x,v,C,{scale:1/g}).then(I=>(I.forEach(k=>{k.startAbs=t.utils.chrToAbs(x,k.start,this.chromSizes),k.endAbs=t.utils.chrToAbs(x,k.end,this.chromSizes)}),I)));break}}return Promise.all(u).then(E=>{let x=E.flat();for(var R=[],$=0;$<this.TILE_SIZE;$++)R.push(null);T.forEach((C,I)=>{if(C<c||C>h)return;let k=x.filter(F=>C>=F.startAbs&&C<F.endAbs).map(F=>F.score);R[I]=k.length>0?k[0]:null}),f.min_value=Math.min(...R),f.max_value=Math.max(...R);let v=new t.utils.DenseDataExtrema1D(R);return f.dense=R,f.denseDataExtrema=v,f.minNonZero=v.minNonZeroInTile,f.maxNonZero=v.maxNonZeroInTile,f})})}determineScale(o,a){let s=[1],l=a-o;this.bwFileHeader.zoomLevels.forEach(f=>{s.push(f.reductionLevel)});for(var u=0;u<s.length;u++){let f=s[u];if(l/f<=this.TILE_SIZE*20)return f}return s.slice(-1)[0]}}return new n(...e)};cf.config={type:"bbi"};var m0=cf;export{m0 as BigwigDataFetcher};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */
//# sourceMappingURL=index.min.js.map
